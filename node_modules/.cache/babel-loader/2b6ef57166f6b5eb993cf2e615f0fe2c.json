{"ast":null,"code":"import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"variant\",\"inputRef\",\"ref\"];import ClickAwayListener from'@mui/material/ClickAwayListener';import{styled}from'@mui/material/styles';import Icon from'@mui/material/Icon';import IconButton from'@mui/material/IconButton';import ListItemIcon from'@mui/material/ListItemIcon';import ListItemText from'@mui/material/ListItemText';import MenuItem from'@mui/material/MenuItem';import Paper from'@mui/material/Paper';import Popper from'@mui/material/Popper';import TextField from'@mui/material/TextField';import Tooltip from'@mui/material/Tooltip';import Typography from'@mui/material/Typography';import match from'autosuggest-highlight/match';import parse from'autosuggest-highlight/parse';import clsx from'clsx';import _ from'@lodash';import{memo,useEffect,useReducer,useRef}from'react';import Autosuggest from'react-autosuggest';import{useSelector}from'react-redux';import{withRouter}from'react-router-dom';import{selectFlatNavigation}from'app/store/fuse/navigationSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Root=styled('div')(function(_ref){var theme=_ref.theme;return{'& .FuseSearch-container':{position:'relative'},'& .FuseSearch-suggestionsContainerOpen':{position:'absolute',zIndex:1,marginTop:theme.spacing(),left:0,right:0},'& .FuseSearch-suggestion':{display:'block'},'& .FuseSearch-suggestionsList':{margin:0,padding:0,listStyleType:'none'},'& .FuseSearch-input':{transition:theme.transitions.create(['background-color'],{easing:theme.transitions.easing.easeInOut,duration:theme.transitions.duration.short}),'&:focus':{backgroundColor:theme.palette.background.paper}}};});function renderInputComponent(inputProps){var variant=inputProps.variant,_inputProps$inputRef=inputProps.inputRef,_inputRef=_inputProps$inputRef===void 0?function(){}:_inputProps$inputRef,ref=inputProps.ref,other=_objectWithoutProperties(inputProps,_excluded);return/*#__PURE__*/_jsx(\"div\",{className:\"w-full relative\",children:variant==='basic'?/*#__PURE__*/ // Outlined\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,InputProps:{inputRef:function inputRef(node){ref(node);_inputRef(node);},classes:{input:'FuseSearch-input py-0 px-16 h-40 md:h-48 ltr:pr-48 rtl:pl-48',notchedOutline:'rounded-8'}},variant:\"outlined\"},other)),/*#__PURE__*/_jsx(Icon,{className:\"absolute top-0 ltr:right-0 rtl:left-0 h-40 md:h-48 w-48 p-12 pointer-events-none\",color:\"action\",children:\"search\"})]}):/*#__PURE__*/ // Standard\n_jsx(TextField,_objectSpread({fullWidth:true,InputProps:{disableUnderline:true,inputRef:function inputRef(node){ref(node);_inputRef(node);},classes:{input:'FuseSearch-input py-0 px-16 h-48 md:h-64'}},variant:\"standard\"},other))});}function renderSuggestion(suggestion,_ref2){var query=_ref2.query,isHighlighted=_ref2.isHighlighted;var matches=match(suggestion.title,query);var parts=parse(suggestion.title,matches);return/*#__PURE__*/_jsxs(MenuItem,{selected:isHighlighted,component:\"div\",children:[/*#__PURE__*/_jsx(ListItemIcon,{className:\"min-w-40\",children:suggestion.icon?/*#__PURE__*/_jsx(Icon,{children:suggestion.icon}):/*#__PURE__*/_jsx(\"span\",{className:\"text-20 w-24 font-semibold uppercase text-center\",children:suggestion.title[0]})}),/*#__PURE__*/_jsx(ListItemText,{primary:parts.map(function(part,index){return part.highlight?/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600},children:part.text},String(index)):/*#__PURE__*/_jsx(\"strong\",{style:{fontWeight:300},children:part.text},String(index));})})]});}function getSuggestions(value,data){var inputValue=_.deburr(value.trim()).toLowerCase();var inputLength=inputValue.length;var count=0;return inputLength===0?[]:data.filter(function(suggestion){var keep=count<10&&match(suggestion.title,inputValue).length>0;if(keep){count+=1;}return keep;});}function getSuggestionValue(suggestion){return suggestion.title;}var initialState={searchText:'',search:false,navigation:null,suggestions:[],noSuggestions:false};function reducer(state,action){switch(action.type){case'open':{return _objectSpread(_objectSpread({},state),{},{opened:true});}case'close':{return _objectSpread(_objectSpread({},state),{},{opened:false,searchText:''});}case'setSearchText':{return _objectSpread(_objectSpread({},state),{},{searchText:action.value});}case'setNavigation':{return _objectSpread(_objectSpread({},state),{},{navigation:action.value});}case'updateSuggestions':{var suggestions=getSuggestions(action.value,state.navigation);var isInputBlank=action.value.trim()==='';var noSuggestions=!isInputBlank&&suggestions.length===0;return _objectSpread(_objectSpread({},state),{},{suggestions:suggestions,noSuggestions:noSuggestions});}case'clearSuggestions':{return _objectSpread(_objectSpread({},state),{},{suggestions:[],noSuggestions:false});}case'decrement':{return{count:state.count-1};}default:{throw new Error();}}}function FuseSearch(props){var navigation=useSelector(selectFlatNavigation);var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var suggestionsNode=useRef(null);var popperNode=useRef(null);var buttonNode=useRef(null);useEffect(function(){dispatch({type:'setNavigation',value:navigation});},[navigation]);function showSearch(ev){ev.stopPropagation();dispatch({type:'open'});document.addEventListener('keydown',escFunction,false);}function hideSearch(){dispatch({type:'close'});document.removeEventListener('keydown',escFunction,false);}function escFunction(event){if(event.keyCode===27){hideSearch();}}function handleSuggestionsFetchRequested(_ref3){var value=_ref3.value;dispatch({type:'updateSuggestions',value:value});}function handleSuggestionSelected(event,_ref4){var suggestion=_ref4.suggestion;event.preventDefault();event.stopPropagation();if(!suggestion.url){return;}props.history.push(suggestion.url);hideSearch();}function handleSuggestionsClearRequested(){dispatch({type:'clearSuggestions'});}function handleChange(event){dispatch({type:'setSearchText',value:event.target.value});}function handleClickAway(event){return state.opened&&(!suggestionsNode.current||!suggestionsNode.current.contains(event.target))&&hideSearch();}var autosuggestProps={renderInputComponent:renderInputComponent,highlightFirstSuggestion:true,suggestions:state.suggestions,onSuggestionsFetchRequested:handleSuggestionsFetchRequested,onSuggestionsClearRequested:handleSuggestionsClearRequested,onSuggestionSelected:handleSuggestionSelected,getSuggestionValue:getSuggestionValue,renderSuggestion:renderSuggestion};switch(props.variant){case'basic':{return/*#__PURE__*/_jsx(\"div\",{className:clsx('flex items-center w-full',props.className),ref:popperNode,children:/*#__PURE__*/_jsx(Autosuggest,_objectSpread(_objectSpread({},autosuggestProps),{},{inputProps:{variant:props.variant,placeholder:props.placeholder,value:state.searchText,onChange:handleChange,onFocus:showSearch,InputLabelProps:{shrink:true},autoFocus:false},theme:{container:'flex flex-1 w-full',suggestionsList:'FuseSearch-suggestionsList',suggestion:'FuseSearch-suggestion'},renderSuggestionsContainer:function renderSuggestionsContainer(options){return/*#__PURE__*/_jsx(Popper,{anchorEl:popperNode.current,open:Boolean(options.children)||state.noSuggestions,popperOptions:{positionFixed:true},className:\"z-9999\",children:/*#__PURE__*/_jsx(\"div\",{ref:suggestionsNode,children:/*#__PURE__*/_jsxs(Paper,_objectSpread(_objectSpread({className:\"shadow-lg rounded-8 overflow-hidden\"},options.containerProps),{},{style:{width:popperNode.current?popperNode.current.clientWidth:null},children:[options.children,state.noSuggestions&&/*#__PURE__*/_jsx(Typography,{className:\"px-16 py-12\",children:props.noResults})]}))})});}}))});}case'full':{return/*#__PURE__*/_jsxs(Root,{className:clsx('flex',props.className),children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Click to search\",placement:\"bottom\",children:/*#__PURE__*/_jsx(\"div\",{onClick:showSearch,onKeyDown:showSearch,role:\"button\",tabIndex:0,ref:buttonNode,children:props.trigger})}),state.opened&&/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClickAway,children:/*#__PURE__*/_jsx(Paper,{className:\"absolute left-0 right-0 top-0 h-full z-9999 shadow-0\",square:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center w-full h-full\",ref:popperNode,children:[/*#__PURE__*/_jsx(Autosuggest,_objectSpread(_objectSpread({},autosuggestProps),{},{inputProps:{placeholder:props.placeholder,value:state.searchText,onChange:handleChange,InputLabelProps:{shrink:true},autoFocus:true},theme:{container:'flex flex-1 w-full',suggestionsList:'FuseSearch-suggestionsList',suggestion:'FuseSearch-suggestion'},renderSuggestionsContainer:function renderSuggestionsContainer(options){return/*#__PURE__*/_jsx(Popper,{anchorEl:popperNode.current,open:Boolean(options.children)||state.noSuggestions,popperOptions:{positionFixed:true},className:\"z-9999\",children:/*#__PURE__*/_jsx(\"div\",{ref:suggestionsNode,children:/*#__PURE__*/_jsxs(Paper,_objectSpread(_objectSpread({className:\"shadow-lg\",square:true},options.containerProps),{},{style:{width:popperNode.current?popperNode.current.clientWidth:null},children:[options.children,state.noSuggestions&&/*#__PURE__*/_jsx(Typography,{className:\"px-16 py-12\",children:props.noResults})]}))})});}})),/*#__PURE__*/_jsx(IconButton,{onClick:hideSearch,className:\"mx-8\",size:\"large\",children:/*#__PURE__*/_jsx(Icon,{children:\"close\"})})]})})})]});}default:{return null;}}}FuseSearch.defaultProps={trigger:/*#__PURE__*/_jsx(IconButton,{className:\"w-40 h-40\",size:\"large\",children:/*#__PURE__*/_jsx(Icon,{children:\"search\"})}),variant:'full',placeholder:'Search',noResults:'No results..'};export default withRouter(/*#__PURE__*/memo(FuseSearch));","map":null,"metadata":{},"sourceType":"module"}