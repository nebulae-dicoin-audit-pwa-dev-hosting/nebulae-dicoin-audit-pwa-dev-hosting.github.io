{"ast":null,"code":"import{useEffect}from'react';import{useTranslation}from'react-i18next';import{Button,Dialog,DialogActions,DialogContent,DialogTitle,Typography,Icon}from'@mui/material';import{makeStyles}from'@mui/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({});var iconType={403:'warning',200:'check_circle'};export default function DialogStatistics(props){var open=props.open,handleClose=props.handleClose,dataDialogDetails=props.dataDialogDetails,indexDetails=props.indexDetails;var _useTranslation=useTranslation('analysisPage'),t=_useTranslation.t;var classes=useStyles();function getRecordAttemptsLatencyAverage(record){var attepms=record.stats.attempts||[];if(attepms.length===0)return'--';var attempsLength=attepms.length;var latencyTotal=attepms.reduce(function(acc,val){return acc+(val.latency||0);},0);return latencyTotal&&attempsLength?latencyTotal/attempsLength:0;}function getRecordAttemptsLatencySum(record){var attepms=record.stats.attempts||[];if(attepms.length===0)return'--';var latencyTotal=attepms.reduce(function(acc,val){return acc+(val.latency||0);},0);return latencyTotal;}function msToSeconds(duration){var seconds=Math.floor(duration/1000%60);return\"\".concat(seconds);}useEffect(function(){console.log('indexDetails',dataDialogDetails[indexDetails]);},[dataDialogDetails,indexDetails]);return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:t('ANALYSIS_DIALOG_RECORD_DETAIL_TITLE')}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-10\",children:\"sync_alt\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Typography,{children:[t('ANALYSIS_DIALOG_RECORD_DETAIL_LATENCY'),\":\",' ',/*#__PURE__*/_jsxs(\"b\",{children:[\"\\u2211 \",Math.ceil(getRecordAttemptsLatencySum(dataDialogDetails[indexDetails])),' ',\"milisegundos\"]})]}),/*#__PURE__*/_jsxs(Typography,{children:[t('ANALYSIS_DIALOG_RECORD_DETAIL_ATTEMPTS'),\":\",' ',/*#__PURE__*/_jsx(\"b\",{children:dataDialogDetails[indexDetails].stats.retryAttempt})]}),/*#__PURE__*/_jsxs(Typography,{children:[t('ANALYSIS_DIALOG_RECORD_DETAIL_TIME_ON_WAITING'),\":\",' ',/*#__PURE__*/_jsxs(\"b\",{children:[msToSeconds(dataDialogDetails[indexDetails].stats.sentTimestamp-dataDialogDetails[indexDetails].timestamp),' ',\"seg\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10\",children:[dataDialogDetails[indexDetails].stats&&dataDialogDetails[indexDetails].stats.attempts.length>0&&/*#__PURE__*/_jsxs(Typography,{children:[\"# \",t('ANALYSIS_DIALOG_RECORD_DETAIL_STATUS_DESCRIPTION')]}),/*#__PURE__*/_jsx(\"div\",{children:((dataDialogDetails[indexDetails].stats||{}).attempts||[]).map(function(attempt,index){return/*#__PURE__*/_jsxs(Typography,{className:\"text-xs\",children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-10 text-xs\",children:iconType[attempt.code]}),\" \",attempt.code,' ',attempt.message]});})})]})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,variant:\"contained\",color:\"error\",children:\"Cerrar\"})})]});}","map":null,"metadata":{},"sourceType":"module"}