{"ast":null,"code":"import _objectSpread from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';import{showMessage}from'app/store/fuse/messageSlice';import firebaseService from'app/services/firebaseService';import jwtService from'app/services/jwtService';import{createUserSettingsFirebase,setUserData}from'./userSlice';export var submitRegister=function submitRegister(_ref){var displayName=_ref.displayName,password=_ref.password,email=_ref.email;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",jwtService.createUser({displayName:displayName,password:password,email:email}).then(function(user){dispatch(setUserData(user));return dispatch(registerSuccess());}).catch(function(errors){return dispatch(registerError(errors));}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var registerWithFirebase=function registerWithFirebase(model){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var email,password,displayName;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(firebaseService.auth){_context2.next=3;break;}console.warn(\"Firebase Service didn't initialize, check your configuration\");return _context2.abrupt(\"return\",function(){return false;});case 3:email=model.email,password=model.password,displayName=model.displayName;return _context2.abrupt(\"return\",firebaseService.auth.createUserWithEmailAndPassword(email,password).then(function(response){dispatch(createUserSettingsFirebase(_objectSpread(_objectSpread({},response.user),{},{displayName:displayName,email:email})));return dispatch(registerSuccess());}).catch(function(error){var usernameErrorCodes=['auth/operation-not-allowed','auth/user-not-found','auth/user-disabled'];var emailErrorCodes=['auth/email-already-in-use','auth/invalid-email'];var passwordErrorCodes=['auth/weak-password','auth/wrong-password'];var response=[];if(usernameErrorCodes.includes(error.code)){response.push({type:'username',message:error.message});}if(emailErrorCodes.includes(error.code)){response.push({type:'email',message:error.message});}if(passwordErrorCodes.includes(error.code)){response.push({type:'password',message:error.message});}if(error.code==='auth/invalid-api-key'){dispatch(showMessage({message:error.message}));}return dispatch(registerError(response));}));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();};var initialState={success:false,errors:[]};var registerSlice=createSlice({name:'auth/register',initialState:initialState,reducers:{registerSuccess:function registerSuccess(state,action){state.success=true;state.errors=[];},registerError:function registerError(state,action){state.success=false;state.errors=action.payload;}},extraReducers:{}});var _registerSlice$action=registerSlice.actions,registerSuccess=_registerSlice$action.registerSuccess,registerError=_registerSlice$action.registerError;export{registerSuccess,registerError};export default registerSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}