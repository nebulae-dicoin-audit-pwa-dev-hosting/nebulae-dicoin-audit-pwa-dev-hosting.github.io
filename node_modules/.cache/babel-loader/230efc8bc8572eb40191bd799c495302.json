{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/dialogs/DialogRecordDetailLogAnalysis.js\";\nimport { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography, Icon } from '@mui/material';\nimport { makeStyles } from '@mui/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({});\nconst iconType = {\n  403: 'warning',\n  200: 'check_circle'\n};\nexport default function DialogRecordDetailLogAnalysis(props) {\n  const {\n    open,\n    handleClose,\n    dataDialogDetails,\n    indexDetails\n  } = props;\n  const {\n    t\n  } = useTranslation('analysisPage');\n  const classes = useStyles();\n\n  function getRecordAttemptsLatencyAverage(record) {\n    const attepms = record.stats.attempts || [];\n    const attempsLength = attepms.length;\n    const latencyTotal = attepms.reduce((acc, val) => acc + (val.latency || 0), 0);\n    return latencyTotal && attempsLength ? latencyTotal / attempsLength : 0;\n  }\n\n  function getRecordAttemptsLatencySum(record) {\n    const attepms = record.stats.attempts || [];\n    if (attepms.length === 0) return '--';\n    const latencyTotal = attepms.reduce((acc, val) => acc + (val.latency || 0), 0);\n    return latencyTotal;\n  }\n\n  function msToSeconds(duration) {\n    const seconds = Math.floor(duration / 1000 % 60);\n    return `${seconds}`;\n  }\n\n  useEffect(() => {\n    console.log('indexDetails', dataDialogDetails[indexDetails]);\n  }, [dataDialogDetails, indexDetails]);\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      id: \"alert-dialog-title\",\n      children: t('ANALYSIS_DIALOG_RECORD_DETAIL_TITLE')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start\",\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          className: \"mr-10\",\n          children: \"sync_alt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            children: [t('ANALYSIS_DIALOG_RECORD_DETAIL_LATENCY'), \":\", ' ', /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"\\u2211 \", Math.ceil(getRecordAttemptsLatencySum(dataDialogDetails[indexDetails])), \" milisegundos\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [t('ANALYSIS_DIALOG_RECORD_DETAIL_ATTEMPTS'), \":\", ' ', /*#__PURE__*/_jsxDEV(\"b\", {\n              children: dataDialogDetails[indexDetails].stats.retryAttempt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [t('ANALYSIS_DIALOG_RECORD_DETAIL_TIME_ON_WAITING'), \":\", ' ', /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [msToSeconds(dataDialogDetails[indexDetails].stats.sentTimestamp - dataDialogDetails[indexDetails].timestamp), ' ', \"seg\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-10\",\n        children: [dataDialogDetails[indexDetails].stats && dataDialogDetails[indexDetails].stats.attempts.length > 0 && /*#__PURE__*/_jsxDEV(Typography, {\n          children: [\"# \", t('ANALYSIS_DIALOG_RECORD_DETAIL_STATUS_DESCRIPTION')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: ((dataDialogDetails[indexDetails].stats || {}).attempts || []).map((attempt, index) => /*#__PURE__*/_jsxDEV(Typography, {\n            className: \"text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              className: \"mr-10 text-xs\",\n              children: iconType[attempt.code]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 19\n            }, this), \" \", attempt.code, ' ', attempt.message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        variant: \"contained\",\n        color: \"error\",\n        children: \"Cerrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/dialogs/DialogRecordDetailLogAnalysis.js"],"names":["useEffect","useTranslation","Button","Dialog","DialogActions","DialogContent","DialogTitle","Typography","Icon","makeStyles","useStyles","iconType","DialogRecordDetailLogAnalysis","props","open","handleClose","dataDialogDetails","indexDetails","t","classes","getRecordAttemptsLatencyAverage","record","attepms","stats","attempts","attempsLength","length","latencyTotal","reduce","acc","val","latency","getRecordAttemptsLatencySum","msToSeconds","duration","seconds","Math","floor","console","log","ceil","retryAttempt","sentTimestamp","timestamp","map","attempt","index","code","message"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\n\nimport { useTranslation } from 'react-i18next';\n\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Typography,\n  Icon,\n} from '@mui/material';\nimport { makeStyles } from '@mui/styles';\n\nconst useStyles = makeStyles({});\n\nconst iconType = {\n  403: 'warning',\n  200: 'check_circle',\n};\n\nexport default function DialogRecordDetailLogAnalysis(props) {\n  const { open, handleClose, dataDialogDetails, indexDetails } = props;\n  const { t } = useTranslation('analysisPage');\n  const classes = useStyles();\n\n  function getRecordAttemptsLatencyAverage(record) {\n    const attepms = record.stats.attempts || [];\n    const attempsLength = attepms.length;\n    const latencyTotal = attepms.reduce((acc, val) => acc + (val.latency || 0), 0);\n    return latencyTotal && attempsLength ? latencyTotal / attempsLength : 0;\n  }\n\n  function getRecordAttemptsLatencySum(record) {\n    const attepms = record.stats.attempts || [];\n    if (attepms.length === 0) return '--';\n    const latencyTotal = attepms.reduce((acc, val) => acc + (val.latency || 0), 0);\n    return latencyTotal;\n  }\n\n  function msToSeconds(duration) {\n    const seconds = Math.floor((duration / 1000) % 60);\n    return `${seconds}`;\n  }\n\n  useEffect(() => {\n    console.log('indexDetails', dataDialogDetails[indexDetails]);\n  }, [dataDialogDetails, indexDetails]);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{t('ANALYSIS_DIALOG_RECORD_DETAIL_TITLE')}</DialogTitle>\n      <DialogContent dividers>\n        <div className=\"flex items-start\">\n          <Icon className=\"mr-10\">sync_alt</Icon>\n          <div>\n            <Typography>\n              {t('ANALYSIS_DIALOG_RECORD_DETAIL_LATENCY')}:{' '}\n              <b>\n              ∑ {Math.ceil(getRecordAttemptsLatencySum(dataDialogDetails[indexDetails]))} milisegundos\n              </b>\n            </Typography>\n            <Typography>\n              {t('ANALYSIS_DIALOG_RECORD_DETAIL_ATTEMPTS')}:{' '}\n              <b>{dataDialogDetails[indexDetails].stats.retryAttempt}</b>\n            </Typography>\n            <Typography>\n              {t('ANALYSIS_DIALOG_RECORD_DETAIL_TIME_ON_WAITING')}:{' '}\n              <b>\n                {msToSeconds(\n                  dataDialogDetails[indexDetails].stats.sentTimestamp -\n                    dataDialogDetails[indexDetails].timestamp\n                )}{' '}\n                seg\n              </b>\n            </Typography>\n          </div>\n        </div>\n        <div className=\"mt-10\">\n          {dataDialogDetails[indexDetails].stats &&\n            dataDialogDetails[indexDetails].stats.attempts.length > 0 && (\n              <Typography># {t('ANALYSIS_DIALOG_RECORD_DETAIL_STATUS_DESCRIPTION')}</Typography>\n            )}\n          <div>\n            {((dataDialogDetails[indexDetails].stats || {}).attempts || []).map(\n              (attempt, index) => (\n                <Typography className=\"text-xs\">\n                  <Icon className=\"mr-10 text-xs\">{iconType[attempt.code]}</Icon> {attempt.code}{' '}\n                  {attempt.message}\n                </Typography>\n              )\n            )}\n          </div>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant=\"contained\" color=\"error\">\n          Cerrar\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}