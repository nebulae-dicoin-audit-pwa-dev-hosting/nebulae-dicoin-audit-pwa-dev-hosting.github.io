{"ast":null,"code":"import _objectSpread from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useDebounce,usePrevious}from'@fuse/hooks';import{styled}from'@mui/material/styles';import{Controller,useForm}from'react-hook-form';import FuseLayoutConfigs from'@fuse/layouts/FuseLayoutConfigs';import _ from'@lodash';import TextField from'@mui/material/TextField';import FormControl from'@mui/material/FormControl';import FormControlLabel from'@mui/material/FormControlLabel';import FormLabel from'@mui/material/FormLabel';import MenuItem from'@mui/material/MenuItem';import Radio from'@mui/material/Radio';import RadioGroup from'@mui/material/RadioGroup';import Select from'@mui/material/Select';import Switch from'@mui/material/Switch';import Typography from'@mui/material/Typography';import{useCallback,useMemo,memo,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{updateUserSettings}from'app/auth/store/userSlice';import{setDefaultSettings}from'app/store/fuse/settingsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Root=styled('div')(function(_ref){var theme=_ref.theme;return{'& .FuseSettings-formControl':{margin:'6px 0',width:'100%','&:last-child':{marginBottom:0}},'& .FuseSettings-group':{},'& .FuseSettings-formGroupTitle':{position:'absolute',top:-10,left:8,fontWeight:600,padding:'0 4px',backgroundColor:theme.palette.background.paper},'& .FuseSettings-formGroup':{position:'relative',border:\"1px solid \".concat(theme.palette.divider),borderRadius:2,padding:'12px 12px 0 12px',margin:'24px 0 16px 0','&:first-of-type':{marginTop:16}}};});function FuseSettings(props){var dispatch=useDispatch();var user=useSelector(function(_ref2){var auth=_ref2.auth;return auth.user;});var themes=useSelector(function(_ref3){var fuse=_ref3.fuse;return fuse.settings.themes;});var settings=useSelector(function(_ref4){var fuse=_ref4.fuse;return fuse.settings.current;});var _useForm=useForm({mode:'onChange',defaultValues:settings}),reset=_useForm.reset,watch=_useForm.watch,control=_useForm.control;var form=watch();var formConfigs=FuseLayoutConfigs[form.layout.style].form;var prevForm=usePrevious(form?_.merge({},form):null);var prevSettings=usePrevious(settings?_.merge({},settings):null);var formChanged=!_.isEqual(form,prevForm);var settingsChanged=!_.isEqual(settings,prevSettings);var handleUpdate=useDebounce(function(newSettings){if(user.role==='guest'){dispatch(setDefaultSettings(newSettings));}else{dispatch(updateUserSettings(newSettings));}},300);useEffect(function(){// Skip inital changes\nif(!prevForm&&!prevSettings){return;}// If theme settings changed update form data\nif(settingsChanged){reset(settings);return;}var newSettings=_.merge({},settings,form);// No need to change\nif(_.isEqual(newSettings,settings)){return;}// If form changed update theme settings\nif(formChanged){if(settings.layout.style!==newSettings.layout.style){var _FuseLayoutConfigs$ne,_newSettings$layout;_.set(newSettings,'layout.config',(_FuseLayoutConfigs$ne=FuseLayoutConfigs[newSettings===null||newSettings===void 0?void 0:(_newSettings$layout=newSettings.layout)===null||_newSettings$layout===void 0?void 0:_newSettings$layout.style])===null||_FuseLayoutConfigs$ne===void 0?void 0:_FuseLayoutConfigs$ne.defaults);}handleUpdate(newSettings);}},[dispatch,form,formChanged,handleUpdate,prevForm,prevSettings,reset,settings,settingsChanged,user]);var ThemeSelect=function ThemeSelect(_ref5){var value=_ref5.value,name=_ref5.name,handleThemeChange=_ref5.handleThemeChange;return/*#__PURE__*/_jsx(Select,{className:\"w-full rounded-8 h-40 overflow-hidden my-8\",value:value,onChange:handleThemeChange,name:name,variant:\"outlined\",style:{backgroundColor:themes[value].palette.background.default,color:themes[value].palette.mode==='light'?'#000000':'#ffffff'},children:Object.entries(themes).filter(function(_ref6){var _ref7=_slicedToArray(_ref6,2),key=_ref7[0],val=_ref7[1];return!(name==='theme.main'&&(key==='mainThemeDark'||key==='mainThemeLight'));}).map(function(_ref8){var _ref9=_slicedToArray(_ref8,2),key=_ref9[0],val=_ref9[1];return/*#__PURE__*/_jsxs(MenuItem,{value:key,className:\"m-8 mt-0 rounded-lg\",style:{backgroundColor:val.palette.background.default,color:val.palette.mode==='light'?'#000000':'#FFFFFF',border:\"1px solid \".concat(val.palette.mode==='light'?'rgba(0, 0, 0, 0.12)':'rgba(255, 255, 255, 0.12)')},children:[_.startCase(key),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full h-8 block absolute bottom-0 left-0 right-0\",style:{borderTop:\"1px solid \".concat(val.palette.mode==='light'?'rgba(0, 0, 0, 0.12)':'rgba(255, 255, 255, 0.12)')},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.primary.main?val.palette.primary.main:val.palette.primary[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.secondary.main?val.palette.secondary.main:val.palette.secondary[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.error.main?val.palette.error.main:val.palette.error[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.background.paper}})]})]},key);})});};var getForm=useCallback(function(_formConfigs,prefix){return Object.entries(_formConfigs).map(function(_ref10){var _ref11=_slicedToArray(_ref10,2),key=_ref11[0],formControl=_ref11[1];var target=prefix?\"\".concat(prefix,\".\").concat(key):key;switch(formControl.type){case'radio':{return/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref12){var field=_ref12.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:formControl.title}),/*#__PURE__*/_jsx(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":formControl.title,className:\"FuseSettings-group\",row:formControl.options.length<4,children:formControl.options.map(function(opt){return/*#__PURE__*/_jsx(FormControlLabel,{value:opt.value,control:/*#__PURE__*/_jsx(Radio,{}),label:opt.name},opt.value);})}))]});}},target);}case'switch':{return/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref13){var _ref13$field=_ref13.field,_onChange=_ref13$field.onChange,value=_ref13$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:formControl.title}),/*#__PURE__*/_jsx(Switch,{checked:value,onChange:function onChange(ev){return _onChange(ev.target.checked);},\"aria-label\":formControl.title})]});}},target);}case'number':{return/*#__PURE__*/_jsx(\"div\",{className:\"FuseSettings-formControl\",children:/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref14){var field=_ref14.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{label:formControl.title,type:\"number\",InputLabelProps:{shrink:true},variant:\"outlined\"}));}})},target);}case'group':{return/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"textSecondary\",children:formControl.title}),getForm(formControl.children,target)]},target);}default:{return'';}}});},[control]);return/*#__PURE__*/_jsxs(Root,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"textSecondary\",children:\"Layout\"}),/*#__PURE__*/_jsx(Controller,{name:\"layout.style\",control:control,render:function render(_ref15){var field=_ref15.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Style\"}),/*#__PURE__*/_jsx(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":\"Layout Style\",className:\"FuseSettings-group\",children:Object.entries(FuseLayoutConfigs).map(function(_ref16){var _ref17=_slicedToArray(_ref16,2),key=_ref17[0],layout=_ref17[1];return/*#__PURE__*/_jsx(FormControlLabel,{value:key,control:/*#__PURE__*/_jsx(Radio,{}),label:layout.title},key);})}))]});}}),useMemo(function(){return getForm(formConfigs,'layout.config');},[formConfigs,getForm]),/*#__PURE__*/_jsx(Typography,{className:\"my-16 text-12 italic\",color:\"textSecondary\",children:\"*Not all option combinations are available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup pb-16\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"textSecondary\",children:\"Theme\"}),/*#__PURE__*/_jsx(Controller,{name:\"theme.main\",control:control,render:function render(_ref18){var _ref18$field=_ref18.field,onChange=_ref18$field.onChange,value=_ref18$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Main\"}),/*#__PURE__*/_jsx(ThemeSelect,{value:value,handleThemeChange:onChange,name:\"theme.main\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.navbar\",control:control,render:function render(_ref19){var _ref19$field=_ref19.field,onChange=_ref19$field.onChange,value=_ref19$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Navbar\"}),/*#__PURE__*/_jsx(ThemeSelect,{value:value,handleThemeChange:onChange,name:\"theme.navbar\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.toolbar\",control:control,render:function render(_ref20){var _ref20$field=_ref20.field,onChange=_ref20$field.onChange,value=_ref20$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Toolbar\"}),/*#__PURE__*/_jsx(ThemeSelect,{value:value,handleThemeChange:onChange,name:\"theme.toolbar\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.footer\",control:control,render:function render(_ref21){var _ref21$field=_ref21.field,onChange=_ref21$field.onChange,value=_ref21$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Footer\"}),/*#__PURE__*/_jsx(ThemeSelect,{value:value,handleThemeChange:onChange,name:\"theme.footer\"})]});}})]}),/*#__PURE__*/_jsx(Controller,{name:\"customScrollbars\",control:control,render:function render(_ref22){var _ref22$field=_ref22.field,_onChange2=_ref22$field.onChange,value=_ref22$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Custom Scrollbars\"}),/*#__PURE__*/_jsx(Switch,{checked:value,onChange:function onChange(ev){return _onChange2(ev.target.checked);},\"aria-label\":\"Custom Scrollbars\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"direction\",control:control,render:function render(_ref23){var field=_ref23.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Direction\"}),/*#__PURE__*/_jsxs(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":\"Layout Direction\",className:\"FuseSettings-group\",row:true,children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"rtl\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"RTL\"},\"rtl\"),/*#__PURE__*/_jsx(FormControlLabel,{value:\"ltr\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"LTR\"},\"ltr\")]}))]});}})]});}export default/*#__PURE__*/memo(FuseSettings);","map":null,"metadata":{},"sourceType":"module"}