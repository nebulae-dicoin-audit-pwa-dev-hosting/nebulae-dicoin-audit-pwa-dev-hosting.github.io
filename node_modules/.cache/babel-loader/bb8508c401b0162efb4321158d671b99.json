{"ast":null,"code":"import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext}from'react';import{useTranslation}from'react-i18next';import ReactDiffViewer,{DiffMethod}from'react-diff-viewer';import{makeStyles}from'@mui/styles';import Map from'../map/Map';import AnalysisContext from'../../Analysis-context/AnalysisContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({heightCalc:{'& > div:nth-child(1)':{height:'calc(100vh - 40rem)','@media (max-width: 1199px)':{height:'calc(100vh - 423px)'},'@media (max-width: 599px)':{height:'auto'}},'& > div:nth-child(2)':{'& > div':{height:'331px'}}}});var newStyles={variables:{light:{codeFoldGutterBackground:'#6F767E',codeFoldBackground:'#E2E4E5'}},line:{padding:'10px 2px','&:hover':{background:'silver'}},content:{width:'auto','@media (max-width: 600px)':{minWidth:'320px'}}};export default function LineToLineComparison(props){var _useContext=useContext(AnalysisContext),appFileContent=_useContext.appFileContent,authorityAppFileContent=_useContext.authorityAppFileContent,isOwnReady=_useContext.isOwnReady,isAuthorityReady=_useContext.isAuthorityReady,mapChangedTimestamp=_useContext.mapChangedTimestamp,setMapChangedTimestamp=_useContext.setMapChangedTimestamp,pathAppFile=_useContext.pathAppFile,setPathAppFile=_useContext.setPathAppFile,pathAuthorityFile=_useContext.pathAuthorityFile,setPathAthprityFile=_useContext.setPathAthprityFile;var _useTranslation=useTranslation('analysisPage'),t=_useTranslation.t;var classes=useStyles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),jsonAppFileContent=_useState2[0],setJsonAppFileContent=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),jsonAuthority=_useState4[0],setJsonAuthority=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),headerJsonApp=_useState6[0],setHeaderJsonApp=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),headerJsonAuthority=_useState8[0],setHeaderJsonAuthority=_useState8[1];useEffect(function(){if(isOwnReady){var locACC=[];var app=appFileContent.map(function(autho){return autho.authorityPayload;}).map(function(payload,index){var date=payload.eventos[0].fecha;var hour=payload.eventos[0].hora;var location={lng:parseFloat(payload.eventos[0].longitud.replace(',','.')),lat:parseFloat(payload.eventos[0].latitud.replace(',','.'))};locACC.push(location);setHeaderJsonApp(\"\".concat(payload.nit,\"    \").concat(payload.cedula,\"   \").concat(payload.placa,\"    \").concat(payload.ruta?payload.ruta:'NA',\"    \").concat(payload.inicio_viaje,\"    \").concat(payload.fin_viaje,\"    \").concat(payload.estado==='0'&&payload.fin_viaje===''?'Viaje en curso':payload.estado==='1'&&payload.fin_viaje!==''?'Viaje finalizado':payload.estado==='0'&&payload.fin_viaje!==''?'Viaje suspendido':payload.estado==='1'&&payload.fin_viaje===''?'Malo':'',\"    \").concat(appFileContent.length));return\"\".concat(index+1,\" \").concat(date.slice(6),\"/\").concat(date.slice(4,-2),\"/\").concat(date.slice(0,-4),\" \").concat(hour.slice(0,-4),\":\").concat(hour.slice(2,-2),\":\").concat(hour.slice(4),\" \").concat(payload.eventos[0].longitud,\" \").concat(payload.eventos[0].latitud,\" \").concat(payload.eventos[0].velocidad,\" \").concat((payload.eventos[0]||{}).puerta[0].estado===0?'DA':'DC').concat(payload.eventos[0].puerta[1].estado===0?'TA':'TC',\" D\").concat(payload.eventos[0].puerta[0].ingresos,\"T\").concat(payload.eventos[0].puerta[1].ingresos,\" D\").concat(payload.eventos[0].puerta[0].salidas,\"T\").concat(payload.eventos[0].puerta[1].salidas,\" \").concat(payload.eventos[0].dop);}).join('\\n');setJsonAppFileContent(app);setPathAppFile(locACC);}},[appFileContent,isOwnReady]);useEffect(function(){if(isAuthorityReady){var locACC=[];var authority=authorityAppFileContent.map(function(payload,index){var date=payload.eventos[0].fecha;var hour=payload.eventos[0].hora;var location={lng:parseFloat(payload.eventos[0].longitud.replace(',','.')),lat:parseFloat(payload.eventos[0].latitud.replace(',','.'))};locACC.push(location);setHeaderJsonAuthority(\"\".concat(payload.nit,\"    \").concat(payload.cedula,\"   \").concat(payload.placa,\"    \").concat(payload.ruta?payload.ruta:'NA',\"    \").concat(payload.inicio_viaje,\"    \").concat(payload.fin_viaje,\"    \").concat(payload.estado==='0'&&payload.fin_viaje===''?'Viaje en curso':payload.estado==='1'&&payload.fin_viaje!==''?'Viaje finalizado':payload.estado==='0'&&payload.fin_viaje!==''?'Viaje suspendido':payload.estado==='1'&&payload.fin_viaje===''?'Malo':'',\"    \").concat(authorityAppFileContent.length));return\"\".concat(index+1,\" \").concat(date.slice(6),\"/\").concat(date.slice(4,-2),\"/\").concat(date.slice(0,-4),\" \").concat(hour.slice(0,-4),\":\").concat(hour.slice(2,-2),\":\").concat(hour.slice(4),\" \").concat(payload.eventos[0].longitud,\" \").concat(payload.eventos[0].latitud,\" \").concat(payload.eventos[0].velocidad,\" \").concat((payload.eventos[0]||{}).puerta[0].estado===0?'DA':'DC').concat(payload.eventos[0].puerta[1].estado===0?'TA':'TC',\" D\").concat(payload.eventos[0].puerta[0].ingresos,\"T\").concat(payload.eventos[0].puerta[1].ingresos,\" D\").concat(payload.eventos[0].puerta[0].salidas,\"T\").concat(payload.eventos[0].puerta[1].salidas,\" \").concat(payload.eventos[0].dop);}).join('\\n');setJsonAuthority(authority);setPathAthprityFile(locACC);}},[authorityAppFileContent,isAuthorityReady]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.heightCalc),children:[jsonAppFileContent&&jsonAuthority&&/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto w-full\",children:/*#__PURE__*/_jsx(ReactDiffViewer,{oldValue:\"\".concat(headerJsonApp,\"\\n\").concat(jsonAppFileContent),newValue:\"\".concat(headerJsonAuthority,\"\\n\").concat(jsonAuthority),splitView:true,compareMethod:DiffMethod.TRIMMED_LINES,styles:newStyles,leftTitle:\"\\uD83D\\uDFE3 \".concat(t('PARAMETER_SIMULATED_TRAVEL_APP_FILE')),rightTitle:\"\\uD83D\\uDD35 \".concat(t('PARAMETER_SIMULATED_TRIP_AUTHORITY_FILE'))})}),pathAppFile.length>0&&pathAuthorityFile.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(Map,{pathAppFile:pathAppFile,pathAuthorityFile:pathAuthorityFile,mapChangedTimestamp:mapChangedTimestamp,setMapChangedTimestamp:setMapChangedTimestamp,appFileContent:appFileContent,authorityAppFileContent:authorityAppFileContent})})]});}","map":null,"metadata":{},"sourceType":"module"}