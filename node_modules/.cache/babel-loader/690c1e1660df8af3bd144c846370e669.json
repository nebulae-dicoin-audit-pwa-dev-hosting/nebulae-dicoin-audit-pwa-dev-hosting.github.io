{"ast":null,"code":"import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext,useRef}from'react';import{useTranslation}from'react-i18next';import{FixedSizeList}from'react-window';import{Icon}from'@mui/material';import{makeStyles}from'@mui/styles';import Row from'./VirtualizedTableExecution/Row';import TravelContext from'../travel-context/TravelContext';import Deck from'./Deck';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({tableExecution:{'& > div:nth-child(1)':{justifyContent:'space-between',paddingTop:'8px',paddingBottom:'8px',display:'grid','grid-template-columns':'9% 12.6% 18.8% 10% 13.1% 12.5% 12.5% 11.5%'},'& li':{justifyContent:'space-between',paddingTop:'8px',paddingBottom:'8px',paddingLeft:'0px',paddingRight:'0px',display:'grid','grid-template-columns':'9% 12.6% 18.8% 10% 13.1% 12.5% 12.5% 11.5%'}},noteCell:{justifyContent:'space-between',paddingTop:'8px',paddingBottom:'8px',paddingLeft:'0px',paddingRight:'0px',display:'grid','grid-template-columns':'9% 12.6% 18.8% 59.6% !important','& p':{whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'}},tableIcon:{position:'relative','& span':{position:'absolute',left:'0px',fontSize:'24px',top:'-1px'},'& p':{marginTop:'16px',marginLeft:'21px',fontSize:'1rem'}},check:{color:'#66bb6a'},error:{color:'#f44336'},warning:{color:'#ff9a00'},marginTopTable:{marginTop:'165px'},marginTopTableTwo:{marginTop:'85px'},/**/sheet:{touchAction:'none'}});var recordStates={PERSISTED:'save',SENT:'check',ERROR:'error',WARNING:'warning',NOTE:'note'};export default function TableExecution(props){var accumulatorTimeThreshold=props.accumulatorTimeThreshold;var _useContext=useContext(TravelContext),openCard=_useContext.openCard,keyboardDetected=_useContext.keyboardDetected,handleOpenDialogRecordDetails=_useContext.handleOpenDialogRecordDetails,initialized=_useContext.initialized,stateRoute=_useContext.stateRoute,records=_useContext.records,availableHeight=_useContext.availableHeight,rowHeight=_useContext.rowHeight,setAvailableHeight=_useContext.setAvailableHeight;var _useTranslation=useTranslation('travelsPage'),t=_useTranslation.t;var classes=useStyles();var listRef=useRef(null);var _useState=useState(),_useState2=_slicedToArray(_useState,2),indexDragModified=_useState2[0],setIndexDragModified=_useState2[1];function createData(type,state,timeSent,timestamp,vel,doors,input,output,desvi,record){return{type:type,state:state,timeSent:timeSent,timestamp:timestamp,vel:vel,doors:doors,input:input,output:output,desvi:desvi,record:record};}var rows=(records||[]).map(function(data){if(data.type==='RECORD'){var state=data.state,timestamp=data.timestamp,_data$tripTempState=data.tripTempState,frontDoorOpen=_data$tripTempState.frontDoorOpen,backDoorOpen=_data$tripTempState.backDoorOpen,_data$tripTempState$g=_data$tripTempState.geolocationPosition,geolocationPosition=_data$tripTempState$g===void 0?{}:_data$tripTempState$g,_data$tripTempState$f=_data$tripTempState.frontDoorInput,frontDoorInput=_data$tripTempState$f===void 0?0:_data$tripTempState$f,_data$tripTempState$f2=_data$tripTempState.frontDoorOutput,frontDoorOutput=_data$tripTempState$f2===void 0?0:_data$tripTempState$f2,_data$tripTempState$b=_data$tripTempState.backDoorInput,backDoorInput=_data$tripTempState$b===void 0?0:_data$tripTempState$b,_data$tripTempState$b2=_data$tripTempState.backDoorOutput,backDoorOutput=_data$tripTempState$b2===void 0?0:_data$tripTempState$b2;return createData(data.type,recordStates[state],state==='PERSISTED'?null:data.stats.sentTimestamp-timestamp,timestamp,((geolocationPosition||{}).coords||{}).speed||0,\"\".concat(frontDoorOpen?'DA':'DC').concat(backDoorOpen?'TA':'TC'),\"\".concat(frontDoorInput,\"/\").concat(backDoorInput),\"\".concat(frontDoorOutput,\"/\").concat(backDoorOutput),((geolocationPosition||{}).coords||{}).dop||10.9,data);}return data;});useEffect(function(){setTimeout(function(){setIndexDragModified(undefined);},100);},[openCard]);return/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-hidden relative\",children:[openCard&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(Deck,{setIndexDragModified:setIndexDragModified,accumulatorTimeThreshold:accumulatorTimeThreshold})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(openCard&&!keyboardDetected&&(indexDragModified>0?true:indexDragModified===undefined)?classes.marginTopTable:openCard&&keyboardDetected&&(indexDragModified>0?true:indexDragModified===undefined)?classes.marginTopTableTwo:'mt-0',\" w-full\"),children:/*#__PURE__*/_jsxs(\"div\",{size:\"small\",className:\"\".concat(classes.tableExecution),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:t('TRAVEL_CONTENT_HOUR')}),/*#__PURE__*/_jsx(\"div\",{children:t('TRAVEL_CONTENT_VEL')}),/*#__PURE__*/_jsx(\"div\",{children:t('TRAVEL_CONTENT_DOORS')}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsx(Icon,{children:\"keyboard_arrow_up\"})}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsx(Icon,{children:\"keyboard_arrow_down\"})}),/*#__PURE__*/_jsx(\"div\",{children:t('TRAVEL_CONTENT_DESV')})]}),(initialized&&stateRoute===null||!initialized&&stateRoute!==null)&&/*#__PURE__*/_jsx(FixedSizeList,{height:availableHeight,width:\"100%\",itemSize:rowHeight,itemCount:(rows||[]).length,itemData:{itemsArray:rows||[],handleOpenDialogRecordDetails:handleOpenDialogRecordDetails,style:classes,array:rows||[]},children:Row})]})})]});}","map":null,"metadata":{},"sourceType":"module"}