{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';import{showMessage}from'app/store/fuse/messageSlice';import firebaseService from'app/services/firebaseService';import jwtService from'app/services/jwtService';import{setUserData}from'./userSlice';export var submitLogin=function submitLogin(_ref){var email=_ref.email,password=_ref.password;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",jwtService.signInWithEmailAndPassword(email,password).then(function(user){dispatch(setUserData(user));return dispatch(loginSuccess());}).catch(function(errors){return dispatch(loginError(errors));}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var submitLoginWithFireBase=function submitLoginWithFireBase(_ref3){var email=_ref3.email,password=_ref3.password;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(firebaseService.auth){_context2.next=3;break;}console.warn(\"Firebase Service didn't initialize, check your configuration\");return _context2.abrupt(\"return\",function(){return false;});case 3:return _context2.abrupt(\"return\",firebaseService.auth.signInWithEmailAndPassword(email,password).then(function(){return dispatch(loginSuccess());}).catch(function(error){var emailErrorCodes=['auth/email-already-in-use','auth/invalid-email','auth/operation-not-allowed','auth/user-not-found','auth/user-disabled'];var passwordErrorCodes=['auth/weak-password','auth/wrong-password'];var response=[];if(emailErrorCodes.includes(error.code)){response.push({type:'email',message:error.message});}if(passwordErrorCodes.includes(error.code)){response.push({type:'password',message:error.message});}if(error.code==='auth/invalid-api-key'){dispatch(showMessage({message:error.message}));}return dispatch(loginError(response));}));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}();};var initialState={success:false,errors:[]};var loginSlice=createSlice({name:'auth/login',initialState:initialState,reducers:{loginSuccess:function loginSuccess(state,action){state.success=true;state.errors=[];},loginError:function loginError(state,action){state.success=false;state.errors=action.payload;}},extraReducers:{}});var _loginSlice$actions=loginSlice.actions,loginSuccess=_loginSlice$actions.loginSuccess,loginError=_loginSlice$actions.loginError;export{loginSuccess,loginError};export default loginSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}