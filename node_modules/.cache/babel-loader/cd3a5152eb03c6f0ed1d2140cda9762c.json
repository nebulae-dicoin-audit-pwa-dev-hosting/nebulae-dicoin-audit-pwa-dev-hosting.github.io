{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/settings/Setting.js\";\nimport { useState, useEffect } from 'react';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { styled } from '@mui/material/styles';\nimport { Hidden, Button, Tabs, Tab, Box } from '@mui/material';\nimport { makeStyles } from '@mui/styles';\nimport _ from '@lodash';\nimport WsRest from './tabs/WsRest';\nimport Travels from './tabs/Travels';\nimport NavbarToggleButton from '../../fuse-layouts/shared-components/NavbarToggleButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Root = styled(FusePageSimple)({\n  '& .FusePageSimple-header': {\n    height: 'auto',\n    minHeight: 'auto'\n  },\n  '& .FusePageSimple-toolbar': {},\n  '& .FusePageSimple-content': {},\n  '& .FusePageSimple-sidebarHeader': {},\n  '& .FusePageSimple-sidebarContent': {}\n});\nconst useStyles = makeStyles({});\nconst height = 160;\n\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      className: \"p-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired\n};\n\nfunction SettingPage(props) {\n  const {\n    t\n  } = useTranslation('settingPage');\n  const configFuse = useSelector(_ref => {\n    let {\n      fuse\n    } = _ref;\n    return fuse.settings.current.layout.config;\n  });\n  const navbar = useSelector(_ref2 => {\n    let {\n      fuse\n    } = _ref2;\n    return fuse.navbar;\n  });\n  const [tabValue, setTabValue] = useState(0);\n  const {\n    enqueueSnackbar\n  } = useSnackbar(); // WSREST\n\n  const [endPoint, setEndPoint] = useState('https://gtpc.metropol.gov.co/gtpc/servicesRest/archivos/procesarRecorrido');\n  const [user, setUser] = useState('');\n  const [password, setPassword] = useState('');\n  const [resultTestConnection, setResultTestConnection] = useState(0);\n  const [numberOfAttemps, setNumberOfAttemps] = useState(3);\n  const [waitTimeBetweenRetries, setWaitTimeBetweenRetries] = useState(150);\n  const [timeout, seTimeout] = useState(5000); // TRAVEL\n\n  const [countdown, setCountdown] = useState(3000); // TRAVEL: registros con ruta\n\n  const [advanceVehicle, setAdvanceVehicle] = useState(240);\n  const [elapse, setElapse] = useState(30);\n  const [speed, setSpeed] = useState(0);\n  const [useDoorStateAsTrigger, setUseDoorStateAsTrigger] = useState(true); // TRAVEL: registros sin ruta\n\n  const [withoutAdvanceVehicle, setWithoutAdvanceVehicle] = useState(100);\n  const [withoutElapse, setWithoutElapse] = useState(1800);\n  const [withoutSpeed, setWithoutSpeed] = useState(0);\n  const [withoutUseDoorStateAsTrigger, setWithoutUseDoorStateAsTrigger] = useState(true);\n  const dataTransmissionConfigLocalStorage = localStorage.getItem('transmissionConfig');\n  const dataRecordGenerationRules = localStorage.getItem('recordGenerationRules');\n\n  function handleChangeTab(event, tabValueToSet) {\n    setTabValue(tabValueToSet);\n  }\n\n  function validateUrl(url) {\n    return typeof url === 'string' && url.length >= 0 && /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(url) ? null : t('INVALID_URL');\n  }\n\n  function validateString(value, minLen, maxLen) {\n    return typeof value === 'string' && value.length >= minLen && value.length <= maxLen ? null : `Debe contener entre ${minLen} y ${maxLen} caracteres`;\n  }\n\n  function validateNumber(num, minVal, maxVal) {\n    return typeof num === 'number' && num >= minVal && num <= maxVal ? null : `Debe tener un valor entre ${minVal} y ${maxVal}`;\n  }\n\n  const valueFocusCleaner = value => {\n    return value.trim();\n  };\n\n  const buildTransmissionConfig = () => ({\n    user,\n    password,\n    url: endPoint,\n    timeout,\n    maxRetires: numberOfAttemps,\n    delayBetweenRetries: waitTimeBetweenRetries\n  });\n\n  const buildRecordGenerationRules = () => ({\n    accumulatorTimeThreshold: countdown,\n    withRoute: {\n      distanceThreshold: advanceVehicle,\n      timeThreshold: elapse,\n      speedThreshold: speed,\n      useDoorStateAsTrigger\n    },\n    withoutRoute: {\n      distanceThreshold: withoutAdvanceVehicle,\n      timeThreshold: withoutElapse,\n      speedThreshold: withoutSpeed,\n      useDoorStateAsTrigger: withoutUseDoorStateAsTrigger\n    }\n  });\n\n  function canBeSubmitted() {\n    const canSubmit = !validateString(password, 0, 200) && !validateString(user, 0, 200) && !validateUrl(endPoint) && !validateNumber(timeout, 0, 600000) && !validateNumber(numberOfAttemps, 0, 100) && !validateNumber(waitTimeBetweenRetries, 0, 60000) && !validateNumber(advanceVehicle, 0, 10000) && !validateNumber(elapse, 0, 86400000) >= 0 && !validateNumber(speed, 0, 500) && !validateNumber(withoutAdvanceVehicle, 0, 10000) && !validateNumber(withoutSpeed, 0, 500) && !validateNumber(countdown, 0, 60000) && !validateNumber(withoutElapse, 0, 86400000);\n    const isTransmisionConfigDifferent = !_.isEqual(buildTransmissionConfig(), JSON.parse(localStorage.getItem('transmissionConfig') || '{}'));\n    const isRecordGenerationRulesDifferent = !_.isEqual(buildRecordGenerationRules(), JSON.parse(localStorage.getItem('recordGenerationRules') || '{}'));\n    return canSubmit && (isTransmisionConfigDifferent || isRecordGenerationRulesDifferent);\n  }\n\n  function handleSave() {\n    localStorage.setItem('transmissionConfig', JSON.stringify(buildTransmissionConfig()));\n    localStorage.setItem('recordGenerationRules', JSON.stringify(buildRecordGenerationRules()));\n    enqueueSnackbar(t('Se guardo la configuración'), {\n      variant: 'success'\n    });\n  }\n\n  useEffect(() => {\n    console.log('dataRecordGenerationRules', JSON.parse(dataRecordGenerationRules));\n\n    if (dataTransmissionConfigLocalStorage) {\n      const data = JSON.parse(dataTransmissionConfigLocalStorage);\n      setEndPoint(data.url);\n      setNumberOfAttemps(data.maxRetires);\n      setUser(data.user);\n      setPassword(data.password);\n      setWaitTimeBetweenRetries(data.delayBetweenRetries);\n      seTimeout(data.timeout);\n    }\n\n    if (dataRecordGenerationRules) {\n      const data = JSON.parse(dataRecordGenerationRules);\n      setCountdown(data.accumulatorTimeThreshold);\n      setAdvanceVehicle(data.withRoute.distanceThreshold);\n      setElapse(data.withRoute.timeThreshold);\n      setSpeed(data.withRoute.speedThreshold);\n      setUseDoorStateAsTrigger(data.withRoute.useDoorStateAsTrigger);\n      setWithoutAdvanceVehicle(data.withoutRoute.distanceThreshold);\n      setWithoutElapse(data.withoutRoute.timeThreshold);\n      setWithoutSpeed(data.withoutRoute.speedThreshold);\n      setWithoutUseDoorStateAsTrigger(data.withoutRoute.useDoorStateAsTrigger);\n    }\n  }, [dataTransmissionConfigLocalStorage, dataRecordGenerationRules]);\n  const childrenProps = {\n    endPoint,\n    setEndPoint,\n    user,\n    setUser,\n    password,\n    setPassword,\n    resultTestConnection,\n    setResultTestConnection,\n    numberOfAttemps,\n    setNumberOfAttemps,\n    waitTimeBetweenRetries,\n    setWaitTimeBetweenRetries,\n    timeout,\n    seTimeout,\n    valueFocusCleaner,\n    countdown,\n    setCountdown,\n    advanceVehicle,\n    setAdvanceVehicle,\n    elapse,\n    setElapse,\n    speed,\n    setSpeed,\n    withoutAdvanceVehicle,\n    setWithoutAdvanceVehicle,\n    withoutElapse,\n    setWithoutElapse,\n    withoutSpeed,\n    setWithoutSpeed,\n    useDoorStateAsTrigger,\n    setUseDoorStateAsTrigger,\n    withoutUseDoorStateAsTrigger,\n    setWithoutUseDoorStateAsTrigger,\n    validateUrl,\n    validateString,\n    validateNumber\n  };\n  return /*#__PURE__*/_jsxDEV(Root, {\n    header: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full flex flex-wrap place-content-start\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full py-10 px-16 flex items-start justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: configFuse.navbar.display && configFuse.navbar.position === 'left' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Hidden, {\n              lgDown: true,\n              children: [(configFuse.navbar.style === 'style-3' || configFuse.navbar.style === 'style-3-dense') && /*#__PURE__*/_jsxDEV(NavbarToggleButton, {\n                className: \"w-40 h-40 p-0 mx-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 23\n              }, this), configFuse.navbar.style === 'style-1' && !navbar.open && /*#__PURE__*/_jsxDEV(NavbarToggleButton, {\n                className: \"w-40 h-40 p-0 mx-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n              lgUp: true,\n              children: /*#__PURE__*/_jsxDEV(NavbarToggleButton, {\n                className: \"w-40 h-40 p-0 mx-0 sm:mx-8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"success\",\n            disabled: !canBeSubmitted(),\n            onClick: handleSave,\n            children: t('SAVE')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }, this),\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          borderBottom: 1,\n          borderColor: 'divider'\n        },\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          variant: \"scrollable\",\n          value: tabValue,\n          onChange: handleChangeTab,\n          \"aria-label\": \"basic tabs example\",\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            label: \"WS REST\",\n            id: `simple-tab-${0}`,\n            \"aria-controls\": `simple-tabpanel-${0}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Viaje\",\n            id: `simple-tab-${1}`,\n            \"aria-controls\": `simple-tabpanel-${1}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 0,\n        children: /*#__PURE__*/_jsxDEV(WsRest, { ...childrenProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 1,\n        children: /*#__PURE__*/_jsxDEV(Travels, { ...childrenProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 5\n  }, this);\n}\n\nexport default SettingPage;","map":{"version":3,"sources":["/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/settings/Setting.js"],"names":["useState","useEffect","FusePageSimple","PropTypes","useTranslation","useSelector","useSnackbar","styled","Hidden","Button","Tabs","Tab","Box","makeStyles","_","WsRest","Travels","NavbarToggleButton","Root","height","minHeight","useStyles","TabPanel","props","children","value","index","other","propTypes","node","number","isRequired","SettingPage","t","configFuse","fuse","settings","current","layout","config","navbar","tabValue","setTabValue","enqueueSnackbar","endPoint","setEndPoint","user","setUser","password","setPassword","resultTestConnection","setResultTestConnection","numberOfAttemps","setNumberOfAttemps","waitTimeBetweenRetries","setWaitTimeBetweenRetries","timeout","seTimeout","countdown","setCountdown","advanceVehicle","setAdvanceVehicle","elapse","setElapse","speed","setSpeed","useDoorStateAsTrigger","setUseDoorStateAsTrigger","withoutAdvanceVehicle","setWithoutAdvanceVehicle","withoutElapse","setWithoutElapse","withoutSpeed","setWithoutSpeed","withoutUseDoorStateAsTrigger","setWithoutUseDoorStateAsTrigger","dataTransmissionConfigLocalStorage","localStorage","getItem","dataRecordGenerationRules","handleChangeTab","event","tabValueToSet","validateUrl","url","length","test","validateString","minLen","maxLen","validateNumber","num","minVal","maxVal","valueFocusCleaner","trim","buildTransmissionConfig","maxRetires","delayBetweenRetries","buildRecordGenerationRules","accumulatorTimeThreshold","withRoute","distanceThreshold","timeThreshold","speedThreshold","withoutRoute","canBeSubmitted","canSubmit","isTransmisionConfigDifferent","isEqual","JSON","parse","isRecordGenerationRulesDifferent","handleSave","setItem","stringify","variant","console","log","data","childrenProps","display","position","style","open","width","borderBottom","borderColor"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { styled } from '@mui/material/styles';\nimport { Hidden, Button, Tabs, Tab, Box } from '@mui/material';\nimport { makeStyles } from '@mui/styles';\nimport _ from '@lodash';\nimport WsRest from './tabs/WsRest';\nimport Travels from './tabs/Travels';\nimport NavbarToggleButton from '../../fuse-layouts/shared-components/NavbarToggleButton';\n\nconst Root = styled(FusePageSimple)({\n  '& .FusePageSimple-header': {\n    height: 'auto',\n    minHeight: 'auto',\n  },\n  '& .FusePageSimple-toolbar': {},\n  '& .FusePageSimple-content': {},\n  '& .FusePageSimple-sidebarHeader': {},\n  '& .FusePageSimple-sidebarContent': {},\n});\n\nconst useStyles = makeStyles({});\n\nconst height = 160;\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box className=\"p-10\">\n          <div>{children}</div>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction SettingPage(props) {\n  const { t } = useTranslation('settingPage');\n  const configFuse = useSelector(({ fuse }) => fuse.settings.current.layout.config);\n  const navbar = useSelector(({ fuse }) => fuse.navbar);\n  const [tabValue, setTabValue] = useState(0);\n  const { enqueueSnackbar } = useSnackbar();\n\n  // WSREST\n  const [endPoint, setEndPoint] = useState(\n    'https://gtpc.metropol.gov.co/gtpc/servicesRest/archivos/procesarRecorrido'\n  );\n  const [user, setUser] = useState('');\n  const [password, setPassword] = useState('');\n  const [resultTestConnection, setResultTestConnection] = useState(0);\n  const [numberOfAttemps, setNumberOfAttemps] = useState(3);\n  const [waitTimeBetweenRetries, setWaitTimeBetweenRetries] = useState(150);\n  const [timeout, seTimeout] = useState(5000);\n\n  // TRAVEL\n  const [countdown, setCountdown] = useState(3000);\n\n  // TRAVEL: registros con ruta\n  const [advanceVehicle, setAdvanceVehicle] = useState(240);\n  const [elapse, setElapse] = useState(30);\n  const [speed, setSpeed] = useState(0);\n  const [useDoorStateAsTrigger, setUseDoorStateAsTrigger] = useState(true);\n\n  // TRAVEL: registros sin ruta\n  const [withoutAdvanceVehicle, setWithoutAdvanceVehicle] = useState(100);\n  const [withoutElapse, setWithoutElapse] = useState(1800);\n  const [withoutSpeed, setWithoutSpeed] = useState(0);\n  const [withoutUseDoorStateAsTrigger, setWithoutUseDoorStateAsTrigger] = useState(true);\n\n  const dataTransmissionConfigLocalStorage = localStorage.getItem('transmissionConfig');\n  const dataRecordGenerationRules = localStorage.getItem('recordGenerationRules');\n\n  function handleChangeTab(event, tabValueToSet) {\n    setTabValue(tabValueToSet);\n  }\n\n  function validateUrl(url) {\n    return typeof url === 'string' &&\n      url.length >= 0 &&\n      /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(\n        url\n      )\n      ? null\n      : t('INVALID_URL');\n  }\n\n  function validateString(value, minLen, maxLen) {\n    return typeof value === 'string' && value.length >= minLen && value.length <= maxLen\n      ? null\n      : `Debe contener entre ${minLen} y ${maxLen} caracteres`;\n  }\n\n  function validateNumber(num, minVal, maxVal) {\n    return typeof num === 'number' && num >= minVal && num <= maxVal\n      ? null\n      : `Debe tener un valor entre ${minVal} y ${maxVal}`;\n  }\n\n  const valueFocusCleaner = (value) => {\n    return value.trim();\n  };\n\n  const buildTransmissionConfig = () => ({\n    user,\n    password,\n    url: endPoint,\n    timeout,\n    maxRetires: numberOfAttemps,\n    delayBetweenRetries: waitTimeBetweenRetries,\n  });\n\n  const buildRecordGenerationRules = () => ({\n    accumulatorTimeThreshold: countdown,\n    withRoute: {\n      distanceThreshold: advanceVehicle,\n      timeThreshold: elapse,\n      speedThreshold: speed,\n      useDoorStateAsTrigger,\n    },\n    withoutRoute: {\n      distanceThreshold: withoutAdvanceVehicle,\n      timeThreshold: withoutElapse,\n      speedThreshold: withoutSpeed,\n      useDoorStateAsTrigger: withoutUseDoorStateAsTrigger,\n    },\n  });\n\n  function canBeSubmitted() {\n    const canSubmit =\n      !validateString(password, 0, 200) &&\n      !validateString(user, 0, 200) &&\n      !validateUrl(endPoint) &&\n      !validateNumber(timeout, 0, 600000) &&\n      !validateNumber(numberOfAttemps, 0, 100) &&\n      !validateNumber(waitTimeBetweenRetries, 0, 60000) &&\n      !validateNumber(advanceVehicle, 0, 10000) &&\n      !validateNumber(elapse, 0, 86400000) >= 0 &&\n      !validateNumber(speed, 0, 500) &&\n      !validateNumber(withoutAdvanceVehicle, 0, 10000) &&\n      !validateNumber(withoutSpeed, 0, 500) &&\n      !validateNumber(countdown, 0, 60000) &&\n      !validateNumber(withoutElapse, 0, 86400000);\n\n    const isTransmisionConfigDifferent = !_.isEqual(\n      buildTransmissionConfig(),\n      JSON.parse(localStorage.getItem('transmissionConfig') || '{}')\n    );\n    const isRecordGenerationRulesDifferent = !_.isEqual(\n      buildRecordGenerationRules(),\n      JSON.parse(localStorage.getItem('recordGenerationRules') || '{}')\n    );\n    return canSubmit && (isTransmisionConfigDifferent || isRecordGenerationRulesDifferent);\n  }\n\n  function handleSave() {\n    localStorage.setItem('transmissionConfig', JSON.stringify(buildTransmissionConfig()));\n    localStorage.setItem('recordGenerationRules', JSON.stringify(buildRecordGenerationRules()));\n    enqueueSnackbar(t('Se guardo la configuración'), { variant: 'success' });\n  }\n\n  useEffect(() => {\n    console.log('dataRecordGenerationRules', JSON.parse(dataRecordGenerationRules));\n    if (dataTransmissionConfigLocalStorage) {\n      const data = JSON.parse(dataTransmissionConfigLocalStorage);\n      setEndPoint(data.url);\n      setNumberOfAttemps(data.maxRetires);\n      setUser(data.user);\n      setPassword(data.password);\n      setWaitTimeBetweenRetries(data.delayBetweenRetries);\n      seTimeout(data.timeout);\n    }\n    if (dataRecordGenerationRules) {\n      const data = JSON.parse(dataRecordGenerationRules);\n      setCountdown(data.accumulatorTimeThreshold);\n      setAdvanceVehicle(data.withRoute.distanceThreshold);\n      setElapse(data.withRoute.timeThreshold);\n      setSpeed(data.withRoute.speedThreshold);\n      setUseDoorStateAsTrigger(data.withRoute.useDoorStateAsTrigger);\n\n      setWithoutAdvanceVehicle(data.withoutRoute.distanceThreshold);\n      setWithoutElapse(data.withoutRoute.timeThreshold);\n      setWithoutSpeed(data.withoutRoute.speedThreshold);\n      setWithoutUseDoorStateAsTrigger(data.withoutRoute.useDoorStateAsTrigger);\n    }\n  }, [dataTransmissionConfigLocalStorage, dataRecordGenerationRules]);\n\n  const childrenProps = {\n    endPoint,\n    setEndPoint,\n    user,\n    setUser,\n    password,\n    setPassword,\n    resultTestConnection,\n    setResultTestConnection,\n    numberOfAttemps,\n    setNumberOfAttemps,\n    waitTimeBetweenRetries,\n    setWaitTimeBetweenRetries,\n    timeout,\n    seTimeout,\n    valueFocusCleaner,\n    countdown,\n    setCountdown,\n    advanceVehicle,\n    setAdvanceVehicle,\n    elapse,\n    setElapse,\n    speed,\n    setSpeed,\n    withoutAdvanceVehicle,\n    setWithoutAdvanceVehicle,\n    withoutElapse,\n    setWithoutElapse,\n    withoutSpeed,\n    setWithoutSpeed,\n    useDoorStateAsTrigger,\n    setUseDoorStateAsTrigger,\n    withoutUseDoorStateAsTrigger,\n    setWithoutUseDoorStateAsTrigger,\n    validateUrl,\n    validateString,\n    validateNumber,\n  };\n\n  return (\n    <Root\n      header={\n        <div className=\"w-full flex flex-wrap place-content-start\">\n          <div className=\"w-full py-10 px-16 flex items-start justify-between\">\n            <div>\n              {configFuse.navbar.display && configFuse.navbar.position === 'left' && (\n                <>\n                  <Hidden lgDown>\n                    {(configFuse.navbar.style === 'style-3' ||\n                      configFuse.navbar.style === 'style-3-dense') && (\n                      <NavbarToggleButton className=\"w-40 h-40 p-0 mx-0\" />\n                    )}\n\n                    {configFuse.navbar.style === 'style-1' && !navbar.open && (\n                      <NavbarToggleButton className=\"w-40 h-40 p-0 mx-0\" />\n                    )}\n                  </Hidden>\n\n                  <Hidden lgUp>\n                    <NavbarToggleButton className=\"w-40 h-40 p-0 mx-0 sm:mx-8\" />\n                  </Hidden>\n                </>\n              )}\n            </div>\n\n            <div>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                disabled={!canBeSubmitted()}\n                onClick={handleSave}\n              >\n                {t('SAVE')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      }\n      content={\n        <Box sx={{ width: '100%' }}>\n          <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n            <Tabs\n              variant=\"scrollable\"\n              value={tabValue}\n              onChange={handleChangeTab}\n              aria-label=\"basic tabs example\"\n            >\n              <Tab label=\"WS REST\" id={`simple-tab-${0}`} aria-controls={`simple-tabpanel-${0}`} />\n              <Tab label=\"Viaje\" id={`simple-tab-${1}`} aria-controls={`simple-tabpanel-${1}`} />\n            </Tabs>\n          </Box>\n          <TabPanel value={tabValue} index={0}>\n            <WsRest {...childrenProps} />\n          </TabPanel>\n          <TabPanel value={tabValue} index={1}>\n            <Travels {...childrenProps} />\n          </TabPanel>\n        </Box>\n      }\n    />\n  );\n}\n\nexport default SettingPage;\n"]},"metadata":{},"sourceType":"module"}