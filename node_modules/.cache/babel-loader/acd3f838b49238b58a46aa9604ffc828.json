{"ast":null,"code":"import{useContext}from'react';import moment from'moment';import{useTranslation}from'react-i18next';import{Button,Dialog,DialogActions,DialogContent,DialogTitle,Typography,Icon,ListItem,List,ListItemAvatar,Avatar,ListItemText}from'@mui/material';import{makeStyles}from'@mui/styles';import TravelContext from'../travel-context/TravelContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var iconType={'-1':'warning','-2':'warning',0:'check_circle'};var useStyles=makeStyles({});export default function DialogStatistics(props){var open=props.open,handleClose=props.handleClose,record=props.record;var _useContext=useContext(TravelContext),dicoin=_useContext.dicoin;var _useTranslation=useTranslation('travelsPage'),t=_useTranslation.t;var classes=useStyles();function msToSeconds(duration){var seconds=Math.ceil(duration/1000%60);return\"\".concat(seconds);}return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:t('TRAVEL_DIALOG_RECORD_DETAIL_TITLE')}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[record.type==='RECORD'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-10\",children:\"sync_alt\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_STATE'),\": \",/*#__PURE__*/_jsx(\"b\",{children:t(record.state)})]}),/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_LATENCY'),\":\",' ',/*#__PURE__*/_jsxs(\"b\",{children:[\"\\u2211 \",Math.ceil(dicoin.getRecordAttemptsLatencySum(record)),\" milisegundos\"]})]}),/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_ATTEMPTS'),\": \",/*#__PURE__*/_jsx(\"b\",{children:record.stats.retryAttempt})]}),record.stats&&record.stats.sentTimestamp&&/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_TIME_ON_WAITING'),\":\",' ',/*#__PURE__*/_jsxs(\"b\",{children:[msToSeconds(record.stats.sentTimestamp-record.timestamp),\" seg\"]})]})]})]}),record.type==='NOTE'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_TIMESTAMP'),\":\",' ',/*#__PURE__*/_jsx(\"b\",{children:moment(record.timestamp).format('DD/MM/YYYY HH:mm:ss')})]}),/*#__PURE__*/_jsxs(Typography,{children:[t('TRAVEL_DIALOG_RECORD_DETAIL_NOTE'),\": \",/*#__PURE__*/_jsx(\"b\",{children:t(record.note)})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10\",children:[record.stats&&record.stats.attempts.length>0&&/*#__PURE__*/_jsxs(Typography,{children:[\"# \",t('TRAVEL_DIALOG_RECORD_DETAIL_STATUS_DESCRIPTION')]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc pl-14\",children:((record.stats||{}).attempts||[]).map(function(attempt,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Typography,{className:\"text-xs\",children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-5 text-xs\",children:iconType[attempt.code]}),\" \",attempt.code,' ',attempt.message]})});})})})]}),/*#__PURE__*/_jsx(List,{children:/*#__PURE__*/_jsxs(ListItem,{button:true,onClick:function onClick(){console.log(record);var geoLocation=record.tripTempState.geolocationPosition;window.open(\"https://www.google.com/maps/search/?api=1&query=\".concat(geoLocation.coords.latitude,\",\").concat(geoLocation.coords.longitude),'_blank');},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Icon,{children:\"maps\"})})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Ir a Maps\"})]},\"goToMaps\")})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,variant:\"contained\",color:\"error\",children:\"Cerrar\"})})]});}","map":null,"metadata":{},"sourceType":"module"}