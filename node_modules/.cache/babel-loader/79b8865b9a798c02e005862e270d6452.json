{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/analysis/tabs/LineToLineComparison.js\";\nimport { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactDiffViewer, { DiffMethod } from 'react-diff-viewer';\nimport { makeStyles } from '@mui/styles';\nimport Map from '../map/Map';\nimport AnalysisContext from '../../Analysis-context/AnalysisContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  heightCalc: {\n    '& > div:nth-child(1)': {\n      height: 'calc(100vh - 40rem)',\n      '@media (max-width: 1199px)': {\n        height: 'calc(100vh - 423px)'\n      },\n      '@media (max-width: 599px)': {\n        height: 'auto'\n      }\n    },\n    '& > div:nth-child(2)': {\n      '& > div': {\n        height: '331px'\n      }\n    }\n  }\n});\nconst newStyles = {\n  variables: {\n    light: {\n      codeFoldGutterBackground: '#6F767E',\n      codeFoldBackground: '#E2E4E5'\n    }\n  },\n  line: {\n    padding: '10px 2px',\n    '&:hover': {\n      background: 'silver'\n    }\n  },\n  content: {\n    width: 'auto',\n    '@media (max-width: 600px)': {\n      minWidth: '320px'\n    }\n  }\n};\nexport default function LineToLineComparison(props) {\n  const {\n    appFileContent,\n    authorityAppFileContent,\n    isOwnReady,\n    isAuthorityReady,\n    mapChangedTimestamp,\n    setMapChangedTimestamp,\n    pathAppFile,\n    setPathAppFile,\n    pathAuthorityFile,\n    setPathAthprityFile\n  } = useContext(AnalysisContext);\n  const {\n    t\n  } = useTranslation('analysisPage');\n  const classes = useStyles();\n  const [jsonAppFileContent, setJsonAppFileContent] = useState('');\n  const [jsonAuthority, setJsonAuthority] = useState('');\n  const [headerJsonApp, setHeaderJsonApp] = useState('');\n  const [headerJsonAuthority, setHeaderJsonAuthority] = useState('');\n  useEffect(() => {\n    if (isOwnReady) {\n      const locACC = [];\n      const app = appFileContent.map(autho => autho.authorityPayload).map((payload, index) => {\n        const date = payload.eventos[0].fecha;\n        const hour = payload.eventos[0].hora;\n        const location = {\n          lng: parseFloat(payload.eventos[0].longitud),\n          lat: parseFloat(payload.eventos[0].latitud)\n        };\n        locACC.push(location);\n        setHeaderJsonApp(`${payload.nit}    ${payload.cedula}   ${payload.placa}    ${payload.ruta ? payload.ruta : 'NA'}    ${payload.inicio_viaje}    ${payload.fin_viaje}    ${payload.estado === '0' && payload.fin_viaje === '' ? 'Viaje en curso' : payload.estado === '1' && payload.fin_viaje !== '' ? 'Viaje finalizado' : payload.estado === '0' && payload.fin_viaje !== '' ? 'Viaje suspendido' : payload.estado === '1' && payload.fin_viaje === '' ? 'Malo' : ''}    ${appFileContent.length}`);\n        return `${index + 1} ${date.slice(6)}/${date.slice(4, -2)}/${date.slice(0, -4)} ${hour.slice(0, -4)}:${hour.slice(2, -2)}:${hour.slice(4)} ${payload.eventos[0].longitud} ${payload.eventos[0].latitud} ${payload.eventos[0].velocidad} ${(payload.eventos[0] || {}).puerta[0].estado === 0 ? 'DA' : 'DC'}${payload.eventos[0].puerta[1].estado === 0 ? 'TA' : 'TC'} D${payload.eventos[0].puerta[0].ingresos}T${payload.eventos[0].puerta[1].ingresos} D${payload.eventos[0].puerta[0].salidas}T${payload.eventos[0].puerta[1].salidas} ${payload.eventos[0].dop}`;\n      }).join('\\n');\n      setJsonAppFileContent(app);\n      setPathAppFile(locACC);\n    }\n  }, [appFileContent, isOwnReady]);\n  useEffect(() => {\n    if (isAuthorityReady) {\n      const locACC = [];\n      const authority = authorityAppFileContent.map((payload, index) => {\n        const date = payload.eventos[0].fecha;\n        const hour = payload.eventos[0].hora;\n        const location = {\n          lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n          lat: parseFloat(payload.eventos[0].latitud.replace(',', '.'))\n        };\n        locACC.push(location);\n        setHeaderJsonAuthority(`${payload.nit}    ${payload.cedula}   ${payload.placa}    ${payload.ruta ? payload.ruta : 'NA'}    ${payload.inicio_viaje}    ${payload.fin_viaje}    ${payload.estado === '0' && payload.fin_viaje === '' ? 'Viaje en curso' : payload.estado === '1' && payload.fin_viaje !== '' ? 'Viaje finalizado' : payload.estado === '0' && payload.fin_viaje !== '' ? 'Viaje suspendido' : payload.estado === '1' && payload.fin_viaje === '' ? 'Malo' : ''}    ${authorityAppFileContent.length}`);\n        return `${index + 1} ${date.slice(6)}/${date.slice(4, -2)}/${date.slice(0, -4)} ${hour.slice(0, -4)}:${hour.slice(2, -2)}:${hour.slice(4)} ${payload.eventos[0].longitud} ${payload.eventos[0].latitud} ${payload.eventos[0].velocidad} ${(payload.eventos[0] || {}).puerta[0].estado === 0 ? 'DA' : 'DC'}${payload.eventos[0].puerta[1].estado === 0 ? 'TA' : 'TC'} D${payload.eventos[0].puerta[0].ingresos}T${payload.eventos[0].puerta[1].ingresos} D${payload.eventos[0].puerta[0].salidas}T${payload.eventos[0].puerta[1].salidas} ${payload.eventos[0].dop}`;\n      }).join('\\n');\n      setJsonAuthority(authority);\n      setPathAthprityFile(locACC);\n    }\n  }, [authorityAppFileContent, isAuthorityReady]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.heightCalc}`,\n    children: [jsonAppFileContent && jsonAuthority && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-auto w-full\",\n      children: /*#__PURE__*/_jsxDEV(ReactDiffViewer, {\n        oldValue: `${headerJsonApp}\\n${jsonAppFileContent}`,\n        newValue: `${headerJsonAuthority}\\n${jsonAuthority}`,\n        splitView: true,\n        compareMethod: DiffMethod.TRIMMED_LINES,\n        styles: newStyles,\n        leftTitle: `ðŸ”´ ${t('PARAMETER_SIMULATED_TRAVEL_APP_FILE')}`,\n        rightTitle: `ðŸ”µ ${t('PARAMETER_SIMULATED_TRIP_AUTHORITY_FILE')}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this), pathAppFile.length > 0 && pathAuthorityFile.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full\",\n      children: /*#__PURE__*/_jsxDEV(Map, {\n        pathAppFile: pathAppFile,\n        pathAuthorityFile: pathAuthorityFile,\n        mapChangedTimestamp: mapChangedTimestamp,\n        setMapChangedTimestamp: setMapChangedTimestamp,\n        appFileContent: appFileContent,\n        authorityAppFileContent: authorityAppFileContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/analysis/tabs/LineToLineComparison.js"],"names":["useState","useEffect","useContext","useTranslation","ReactDiffViewer","DiffMethod","makeStyles","Map","AnalysisContext","useStyles","heightCalc","height","newStyles","variables","light","codeFoldGutterBackground","codeFoldBackground","line","padding","background","content","width","minWidth","LineToLineComparison","props","appFileContent","authorityAppFileContent","isOwnReady","isAuthorityReady","mapChangedTimestamp","setMapChangedTimestamp","pathAppFile","setPathAppFile","pathAuthorityFile","setPathAthprityFile","t","classes","jsonAppFileContent","setJsonAppFileContent","jsonAuthority","setJsonAuthority","headerJsonApp","setHeaderJsonApp","headerJsonAuthority","setHeaderJsonAuthority","locACC","app","map","autho","authorityPayload","payload","index","date","eventos","fecha","hour","hora","location","lng","parseFloat","longitud","lat","latitud","push","nit","cedula","placa","ruta","inicio_viaje","fin_viaje","estado","length","slice","velocidad","puerta","ingresos","salidas","dop","join","authority","replace","TRIMMED_LINES"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,OAAOC,eAAP,IAA0BC,UAA1B,QAA4C,mBAA5C;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,eAAP,MAA4B,wCAA5B;;AAEA,MAAMC,SAAS,GAAGH,UAAU,CAAC;AAC3BI,EAAAA,UAAU,EAAE;AACV,4BAAwB;AACtBC,MAAAA,MAAM,EAAE,qBADc;AAEtB,oCAA8B;AAC5BA,QAAAA,MAAM,EAAE;AADoB,OAFR;AAKtB,mCAA6B;AAC3BA,QAAAA,MAAM,EAAE;AADmB;AALP,KADd;AAUV,4BAAwB;AACtB,iBAAW;AACTA,QAAAA,MAAM,EAAE;AADC;AADW;AAVd;AADe,CAAD,CAA5B;AAmBA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,KAAK,EAAE;AACLC,MAAAA,wBAAwB,EAAE,SADrB;AAELC,MAAAA,kBAAkB,EAAE;AAFf;AADE,GADK;AAOhBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE,UADL;AAEJ,eAAW;AACTC,MAAAA,UAAU,EAAE;AADH;AAFP,GAPU;AAahBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,KAAK,EAAE,MADA;AAEP,iCAA6B;AAC3BC,MAAAA,QAAQ,EAAE;AADiB;AAFtB;AAbO,CAAlB;AAqBA,eAAe,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;AAClD,QAAM;AACJC,IAAAA,cADI;AAEJC,IAAAA,uBAFI;AAGJC,IAAAA,UAHI;AAIJC,IAAAA,gBAJI;AAKJC,IAAAA,mBALI;AAMJC,IAAAA,sBANI;AAOJC,IAAAA,WAPI;AAQJC,IAAAA,cARI;AASJC,IAAAA,iBATI;AAUJC,IAAAA;AAVI,MAWFhC,UAAU,CAACM,eAAD,CAXd;AAYA,QAAM;AAAE2B,IAAAA;AAAF,MAAQhC,cAAc,CAAC,cAAD,CAA5B;AACA,QAAMiC,OAAO,GAAG3B,SAAS,EAAzB;AACA,QAAM,CAAC4B,kBAAD,EAAqBC,qBAArB,IAA8CtC,QAAQ,CAAC,EAAD,CAA5D;AACA,QAAM,CAACuC,aAAD,EAAgBC,gBAAhB,IAAoCxC,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACyC,aAAD,EAAgBC,gBAAhB,IAAoC1C,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAAC2C,mBAAD,EAAsBC,sBAAtB,IAAgD5C,QAAQ,CAAC,EAAD,CAA9D;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI0B,UAAJ,EAAgB;AACd,YAAMkB,MAAM,GAAG,EAAf;AACA,YAAMC,GAAG,GAAGrB,cAAc,CACvBsB,GADS,CACJC,KAAD,IAAWA,KAAK,CAACC,gBADZ,EAETF,GAFS,CAEL,CAACG,OAAD,EAAUC,KAAV,KAAoB;AACvB,cAAMC,IAAI,GAAGF,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBC,KAAhC;AACA,cAAMC,IAAI,GAAGL,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBG,IAAhC;AACA,cAAMC,QAAQ,GAAG;AACfC,UAAAA,GAAG,EAAEC,UAAU,CAACT,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBO,QAApB,CADA;AAEfC,UAAAA,GAAG,EAAEF,UAAU,CAACT,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBS,OAApB;AAFA,SAAjB;AAIAjB,QAAAA,MAAM,CAACkB,IAAP,CAAYN,QAAZ;AACAf,QAAAA,gBAAgB,CACb,GAAEQ,OAAO,CAACc,GAAI,OAAMd,OAAO,CAACe,MAAO,MAAKf,OAAO,CAACgB,KAAM,OACrDhB,OAAO,CAACiB,IAAR,GAAejB,OAAO,CAACiB,IAAvB,GAA8B,IAC/B,OAAMjB,OAAO,CAACkB,YAAa,OAAMlB,OAAO,CAACmB,SAAU,OAClDnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACI,gBADJ,GAEInB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,kBADA,GAEAnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,kBADA,GAEAnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,MADA,GAEA,EACL,OAAM5C,cAAc,CAAC8C,MAAO,EAbf,CAAhB;AAeA,eAAQ,GAAEpB,KAAK,GAAG,CAAE,IAAGC,IAAI,CAACoB,KAAL,CAAW,CAAX,CAAc,IAAGpB,IAAI,CAACoB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGpB,IAAI,CAACoB,KAAL,CAC3D,CAD2D,EAE3D,CAAC,CAF0D,CAG3D,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,CAAc,IAC3DtB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBO,QACpB,IAAGV,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBS,OAAQ,IAAGZ,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBoB,SAAU,IAC7D,CAACvB,OAAO,CAACG,OAAR,CAAgB,CAAhB,KAAsB,EAAvB,EAA2BqB,MAA3B,CAAkC,CAAlC,EAAqCJ,MAArC,KAAgD,CAAhD,GAAoD,IAApD,GAA2D,IAC5D,GAAEpB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BJ,MAA7B,KAAwC,CAAxC,GAA4C,IAA5C,GAAmD,IAAK,KACzDpB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BC,QAC9B,IAAGzB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BC,QAAS,KAAIzB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BE,OAAQ,IACjF1B,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BE,OAC9B,IAAG1B,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBwB,GAAI,EAX3B;AAYD,OArCS,EAsCTC,IAtCS,CAsCJ,IAtCI,CAAZ;AAuCAxC,MAAAA,qBAAqB,CAACQ,GAAD,CAArB;AACAd,MAAAA,cAAc,CAACa,MAAD,CAAd;AACD;AACF,GA7CQ,EA6CN,CAACpB,cAAD,EAAiBE,UAAjB,CA7CM,CAAT;AA+CA1B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2B,gBAAJ,EAAsB;AACpB,YAAMiB,MAAM,GAAG,EAAf;AACA,YAAMkC,SAAS,GAAGrD,uBAAuB,CACtCqB,GADe,CACX,CAACG,OAAD,EAAUC,KAAV,KAAoB;AACvB,cAAMC,IAAI,GAAGF,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBC,KAAhC;AACA,cAAMC,IAAI,GAAGL,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBG,IAAhC;AACA,cAAMC,QAAQ,GAAG;AACfC,UAAAA,GAAG,EAAEC,UAAU,CAACT,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBO,QAAnB,CAA4BoB,OAA5B,CAAoC,GAApC,EAAyC,GAAzC,CAAD,CADA;AAEfnB,UAAAA,GAAG,EAAEF,UAAU,CAACT,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBS,OAAnB,CAA2BkB,OAA3B,CAAmC,GAAnC,EAAwC,GAAxC,CAAD;AAFA,SAAjB;AAIAnC,QAAAA,MAAM,CAACkB,IAAP,CAAYN,QAAZ;AACAb,QAAAA,sBAAsB,CACnB,GAAEM,OAAO,CAACc,GAAI,OAAMd,OAAO,CAACe,MAAO,MAAKf,OAAO,CAACgB,KAAM,OACrDhB,OAAO,CAACiB,IAAR,GAAejB,OAAO,CAACiB,IAAvB,GAA8B,IAC/B,OAAMjB,OAAO,CAACkB,YAAa,OAAMlB,OAAO,CAACmB,SAAU,OAClDnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACI,gBADJ,GAEInB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,kBADA,GAEAnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,kBADA,GAEAnB,OAAO,CAACoB,MAAR,KAAmB,GAAnB,IAA0BpB,OAAO,CAACmB,SAAR,KAAsB,EAAhD,GACA,MADA,GAEA,EACL,OAAM3C,uBAAuB,CAAC6C,MAAO,EAblB,CAAtB;AAeA,eAAQ,GAAEpB,KAAK,GAAG,CAAE,IAAGC,IAAI,CAACoB,KAAL,CAAW,CAAX,CAAc,IAAGpB,IAAI,CAACoB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGpB,IAAI,CAACoB,KAAL,CAC3D,CAD2D,EAE3D,CAAC,CAF0D,CAG3D,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAkB,IAAGjB,IAAI,CAACiB,KAAL,CAAW,CAAX,CAAc,IAC3DtB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBO,QACpB,IAAGV,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBS,OAAQ,IAAGZ,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBoB,SAAU,IAC7D,CAACvB,OAAO,CAACG,OAAR,CAAgB,CAAhB,KAAsB,EAAvB,EAA2BqB,MAA3B,CAAkC,CAAlC,EAAqCJ,MAArC,KAAgD,CAAhD,GAAoD,IAApD,GAA2D,IAC5D,GAAEpB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BJ,MAA7B,KAAwC,CAAxC,GAA4C,IAA5C,GAAmD,IAAK,KACzDpB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BC,QAC9B,IAAGzB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BC,QAAS,KAAIzB,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BE,OAAQ,IACjF1B,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBqB,MAAnB,CAA0B,CAA1B,EAA6BE,OAC9B,IAAG1B,OAAO,CAACG,OAAR,CAAgB,CAAhB,EAAmBwB,GAAI,EAX3B;AAYD,OApCe,EAqCfC,IArCe,CAqCV,IArCU,CAAlB;AAsCAtC,MAAAA,gBAAgB,CAACuC,SAAD,CAAhB;AACA7C,MAAAA,mBAAmB,CAACW,MAAD,CAAnB;AACD;AACF,GA5CQ,EA4CN,CAACnB,uBAAD,EAA0BE,gBAA1B,CA5CM,CAAT;AA6CA,sBACE;AAAK,IAAA,SAAS,EAAG,GAAEQ,OAAO,CAAC1B,UAAW,EAAtC;AAAA,eACG2B,kBAAkB,IAAIE,aAAtB,iBACC;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA,6BACE,QAAC,eAAD;AACE,QAAA,QAAQ,EAAG,GAAEE,aAAc,KAAIJ,kBAAmB,EADpD;AAEE,QAAA,QAAQ,EAAG,GAAEM,mBAAoB,KAAIJ,aAAc,EAFrD;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,aAAa,EAAElC,UAAU,CAAC4E,aAJ5B;AAKE,QAAA,MAAM,EAAErE,SALV;AAME,QAAA,SAAS,EAAG,MAAKuB,CAAC,CAAC,qCAAD,CAAwC,EAN5D;AAOE,QAAA,UAAU,EAAG,MAAKA,CAAC,CAAC,yCAAD,CAA4C;AAPjE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFJ,EAcGJ,WAAW,CAACwC,MAAZ,GAAqB,CAArB,IAA0BtC,iBAAiB,CAACsC,MAAlB,GAA2B,CAArD,iBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACE,QAAC,GAAD;AACE,QAAA,WAAW,EAAExC,WADf;AAEE,QAAA,iBAAiB,EAAEE,iBAFrB;AAGE,QAAA,mBAAmB,EAAEJ,mBAHvB;AAIE,QAAA,sBAAsB,EAAEC,sBAJ1B;AAKE,QAAA,cAAc,EAAEL,cALlB;AAME,QAAA,uBAAuB,EAAEC;AAN3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6BD","sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactDiffViewer, { DiffMethod } from 'react-diff-viewer';\nimport { makeStyles } from '@mui/styles';\nimport Map from '../map/Map';\nimport AnalysisContext from '../../Analysis-context/AnalysisContext';\n\nconst useStyles = makeStyles({\n  heightCalc: {\n    '& > div:nth-child(1)': {\n      height: 'calc(100vh - 40rem)',\n      '@media (max-width: 1199px)': {\n        height: 'calc(100vh - 423px)',\n      },\n      '@media (max-width: 599px)': {\n        height: 'auto',\n      },\n    },\n    '& > div:nth-child(2)': {\n      '& > div': {\n        height: '331px',\n      },\n    },\n  },\n});\n\nconst newStyles = {\n  variables: {\n    light: {\n      codeFoldGutterBackground: '#6F767E',\n      codeFoldBackground: '#E2E4E5',\n    },\n  },\n  line: {\n    padding: '10px 2px',\n    '&:hover': {\n      background: 'silver',\n    },\n  },\n  content: {\n    width: 'auto',\n    '@media (max-width: 600px)': {\n      minWidth: '320px',\n    },\n  },\n};\n\nexport default function LineToLineComparison(props) {\n  const {\n    appFileContent,\n    authorityAppFileContent,\n    isOwnReady,\n    isAuthorityReady,\n    mapChangedTimestamp,\n    setMapChangedTimestamp,\n    pathAppFile,\n    setPathAppFile,\n    pathAuthorityFile,\n    setPathAthprityFile,\n  } = useContext(AnalysisContext);\n  const { t } = useTranslation('analysisPage');\n  const classes = useStyles();\n  const [jsonAppFileContent, setJsonAppFileContent] = useState('');\n  const [jsonAuthority, setJsonAuthority] = useState('');\n  const [headerJsonApp, setHeaderJsonApp] = useState('');\n  const [headerJsonAuthority, setHeaderJsonAuthority] = useState('');\n\n  useEffect(() => {\n    if (isOwnReady) {\n      const locACC = [];\n      const app = appFileContent\n        .map((autho) => autho.authorityPayload)\n        .map((payload, index) => {\n          const date = payload.eventos[0].fecha;\n          const hour = payload.eventos[0].hora;\n          const location = {\n            lng: parseFloat(payload.eventos[0].longitud),\n            lat: parseFloat(payload.eventos[0].latitud),\n          };\n          locACC.push(location);\n          setHeaderJsonApp(\n            `${payload.nit}    ${payload.cedula}   ${payload.placa}    ${\n              payload.ruta ? payload.ruta : 'NA'\n            }    ${payload.inicio_viaje}    ${payload.fin_viaje}    ${\n              payload.estado === '0' && payload.fin_viaje === ''\n                ? 'Viaje en curso'\n                : payload.estado === '1' && payload.fin_viaje !== ''\n                ? 'Viaje finalizado'\n                : payload.estado === '0' && payload.fin_viaje !== ''\n                ? 'Viaje suspendido'\n                : payload.estado === '1' && payload.fin_viaje === ''\n                ? 'Malo'\n                : ''\n            }    ${appFileContent.length}`\n          );\n          return `${index + 1} ${date.slice(6)}/${date.slice(4, -2)}/${date.slice(\n            0,\n            -4\n          )} ${hour.slice(0, -4)}:${hour.slice(2, -2)}:${hour.slice(4)} ${\n            payload.eventos[0].longitud\n          } ${payload.eventos[0].latitud} ${payload.eventos[0].velocidad} ${\n            (payload.eventos[0] || {}).puerta[0].estado === 0 ? 'DA' : 'DC'\n          }${payload.eventos[0].puerta[1].estado === 0 ? 'TA' : 'TC'} D${\n            payload.eventos[0].puerta[0].ingresos\n          }T${payload.eventos[0].puerta[1].ingresos} D${payload.eventos[0].puerta[0].salidas}T${\n            payload.eventos[0].puerta[1].salidas\n          } ${payload.eventos[0].dop}`;\n        })\n        .join('\\n');\n      setJsonAppFileContent(app);\n      setPathAppFile(locACC);\n    }\n  }, [appFileContent, isOwnReady]);\n\n  useEffect(() => {\n    if (isAuthorityReady) {\n      const locACC = [];\n      const authority = authorityAppFileContent\n        .map((payload, index) => {\n          const date = payload.eventos[0].fecha;\n          const hour = payload.eventos[0].hora;\n          const location = {\n            lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n            lat: parseFloat(payload.eventos[0].latitud.replace(',', '.')),\n          };\n          locACC.push(location);\n          setHeaderJsonAuthority(\n            `${payload.nit}    ${payload.cedula}   ${payload.placa}    ${\n              payload.ruta ? payload.ruta : 'NA'\n            }    ${payload.inicio_viaje}    ${payload.fin_viaje}    ${\n              payload.estado === '0' && payload.fin_viaje === ''\n                ? 'Viaje en curso'\n                : payload.estado === '1' && payload.fin_viaje !== ''\n                ? 'Viaje finalizado'\n                : payload.estado === '0' && payload.fin_viaje !== ''\n                ? 'Viaje suspendido'\n                : payload.estado === '1' && payload.fin_viaje === ''\n                ? 'Malo'\n                : ''\n            }    ${authorityAppFileContent.length}`\n          );\n          return `${index + 1} ${date.slice(6)}/${date.slice(4, -2)}/${date.slice(\n            0,\n            -4\n          )} ${hour.slice(0, -4)}:${hour.slice(2, -2)}:${hour.slice(4)} ${\n            payload.eventos[0].longitud\n          } ${payload.eventos[0].latitud} ${payload.eventos[0].velocidad} ${\n            (payload.eventos[0] || {}).puerta[0].estado === 0 ? 'DA' : 'DC'\n          }${payload.eventos[0].puerta[1].estado === 0 ? 'TA' : 'TC'} D${\n            payload.eventos[0].puerta[0].ingresos\n          }T${payload.eventos[0].puerta[1].ingresos} D${payload.eventos[0].puerta[0].salidas}T${\n            payload.eventos[0].puerta[1].salidas\n          } ${payload.eventos[0].dop}`;\n        })\n        .join('\\n');\n      setJsonAuthority(authority);\n      setPathAthprityFile(locACC);\n    }\n  }, [authorityAppFileContent, isAuthorityReady]);\n  return (\n    <div className={`${classes.heightCalc}`}>\n      {jsonAppFileContent && jsonAuthority && (\n        <div className=\"overflow-auto w-full\">\n          <ReactDiffViewer\n            oldValue={`${headerJsonApp}\\n${jsonAppFileContent}`}\n            newValue={`${headerJsonAuthority}\\n${jsonAuthority}`}\n            splitView\n            compareMethod={DiffMethod.TRIMMED_LINES}\n            styles={newStyles}\n            leftTitle={`ðŸ”´ ${t('PARAMETER_SIMULATED_TRAVEL_APP_FILE')}`}\n            rightTitle={`ðŸ”µ ${t('PARAMETER_SIMULATED_TRIP_AUTHORITY_FILE')}`}\n          />\n        </div>\n      )}\n      {pathAppFile.length > 0 && pathAuthorityFile.length > 0 && (\n        <div className=\"w-full\">\n          <Map\n            pathAppFile={pathAppFile}\n            pathAuthorityFile={pathAuthorityFile}\n            mapChangedTimestamp={mapChangedTimestamp}\n            setMapChangedTimestamp={setMapChangedTimestamp}\n            appFileContent={appFileContent}\n            authorityAppFileContent={authorityAppFileContent}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}