{"ast":null,"code":"import _objectSpread from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createTheme,getContrastRatio}from'@mui/material/styles';import{createSlice,createSelector}from'@reduxjs/toolkit';import _ from'@lodash';import{defaultThemes,mainThemeVariations,extendThemeWithMixins,mustHaveThemeOptions,defaultThemeOptions,getParsedQuerySettings,defaultSettings}from'@fuse/default-settings';import FuseSettingsConfig from'app/fuse-configs/settingsConfig';import FuseThemesConfig from'app/fuse-configs/themesConfig';import FuseLayoutConfigs from'app/fuse-layouts/FuseLayoutConfigs';function getInitialSettings(){var defaultLayoutStyle=FuseSettingsConfig.layout&&FuseSettingsConfig.layout.style?FuseSettingsConfig.layout.style:'layout1';var layout={style:defaultLayoutStyle,config:FuseLayoutConfigs[defaultLayoutStyle].defaults};return _.merge({},defaultSettings,{layout:layout},FuseSettingsConfig,getParsedQuerySettings());}export function generateSettings(_defaultSettings,_newSettings){var _FuseLayoutConfigs$_n,_newSettings$layout;var response=_.merge({},_defaultSettings,{layout:{config:(_FuseLayoutConfigs$_n=FuseLayoutConfigs[_newSettings===null||_newSettings===void 0?void 0:(_newSettings$layout=_newSettings.layout)===null||_newSettings$layout===void 0?void 0:_newSettings$layout.style])===null||_FuseLayoutConfigs$_n===void 0?void 0:_FuseLayoutConfigs$_n.defaults}},_newSettings);/**\n   * Making theme values failsafe\n   */Object.entries(response.theme).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(value!=='mainThemeDark'&&value!=='mainThemeLight'&&!FuseThemesConfig[value]){response.theme[key]='default';}});return response;}var getThemes=function getThemes(state){return state.fuse.settings.themes;};var getDirection=function getDirection(state){return state.fuse.settings.current.direction;};var getMainThemeId=function getMainThemeId(state){return state.fuse.settings.current.theme.main;};var getNavbarThemeId=function getNavbarThemeId(state){return state.fuse.settings.current.theme.navbar;};var getToolbarThemeId=function getToolbarThemeId(state){return state.fuse.settings.current.theme.toolbar;};var getFooterThemeId=function getFooterThemeId(state){return state.fuse.settings.current.theme.footer;};function generateMuiTheme(themes,id,direction){var data=_.merge({},defaultThemeOptions,themes[id],mustHaveThemeOptions);var response=createTheme(_.merge({},data,{mixins:extendThemeWithMixins(data),direction:direction}));return response;}export var selectFuseThemeById=function selectFuseThemeById(id){return createSelector([getThemes,getDirection],function(themes,direction){return generateMuiTheme(themes,id,direction);});};export var selectContrastMainTheme=function selectContrastMainTheme(bgColor){function isDark(color){return getContrastRatio(color,'#ffffff')>=3;}return isDark(bgColor)?selectMainThemeDark:selectMainThemeLight;};export var selectMainTheme=createSelector([getThemes,getDirection,getMainThemeId],function(themes,direction,id){return generateMuiTheme(themes,id,direction);});export var selectMainThemeDark=createSelector([getThemes,getDirection],function(themes,direction,id){return generateMuiTheme(themes,'mainThemeDark',direction);});export var selectMainThemeLight=createSelector([getThemes,getDirection],function(themes,direction,id){return generateMuiTheme(themes,'mainThemeLight',direction);});export var selectNavbarTheme=createSelector([getThemes,getDirection,getNavbarThemeId],function(themes,direction,id){return generateMuiTheme(themes,id,direction);});export var selectToolbarTheme=createSelector([getThemes,getDirection,getToolbarThemeId],function(themes,direction,id){return generateMuiTheme(themes,id,direction);});export var selectFooterTheme=createSelector([getThemes,getDirection,getFooterThemeId],function(themes,direction,id){return generateMuiTheme(themes,id,direction);});var themesObjRaw=Object.keys(FuseThemesConfig).length!==0?FuseThemesConfig:defaultThemes;var initialSettings=getInitialSettings();var initialThemes=_objectSpread(_objectSpread({},themesObjRaw),mainThemeVariations(themesObjRaw[initialSettings.theme.main]));var initialState={initial:initialSettings,defaults:_.merge({},initialSettings),current:_.merge({},initialSettings),themes:initialThemes};var settingsSlice=createSlice({name:'settings',initialState:initialState,reducers:{setSettings:function setSettings(state,action){var current=generateSettings(state.defaults,action.payload);var themes=current.theme.main!==state.current.theme.main?_objectSpread(_objectSpread({},state.themes),mainThemeVariations(themesObjRaw[current.theme.main])):state.themes;return _objectSpread(_objectSpread({},state),{},{current:current,themes:themes});},setDefaultSettings:function setDefaultSettings(state,action){var defaults=generateSettings(state.defaults,action.payload);var themes=defaults.theme.main!==state.defaults.theme.main?_objectSpread(_objectSpread({},state.themes),mainThemeVariations(themesObjRaw[defaults.theme.main])):state.themes;return _objectSpread(_objectSpread({},state),{},{defaults:_.merge({},defaults),current:_.merge({},defaults),themes:themes});},setInitialSettings:function setInitialSettings(state,action){return _.merge({},initialState);},resetSettings:function resetSettings(state,action){var themes=_objectSpread(_objectSpread({},state.themes),mainThemeVariations(themesObjRaw[state.defaults.theme.main]));return _objectSpread(_objectSpread({},state),{},{defaults:_.merge({},state.defaults),current:_.merge({},state.defaults),themes:themes});}}});var _settingsSlice$action=settingsSlice.actions,resetSettings=_settingsSlice$action.resetSettings,setDefaultSettings=_settingsSlice$action.setDefaultSettings,setInitialSettings=_settingsSlice$action.setInitialSettings,setSettings=_settingsSlice$action.setSettings;export{resetSettings,setDefaultSettings,setInitialSettings,setSettings};export default settingsSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}