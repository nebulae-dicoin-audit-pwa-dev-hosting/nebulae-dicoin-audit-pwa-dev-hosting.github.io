{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{singleton}from'../MinimongoDB/MinimongoDB';var minimongoDB=singleton();var CollectionName='Record';var RecordDA=/*#__PURE__*/function(){function RecordDA(){_classCallCheck(this,RecordDA);}_createClass(RecordDA,null,[{key:\"insertRecord\",value:function insertRecord(doc){var collection=minimongoDB.db[CollectionName];collection.findOne({_id:doc._id},{},function(res){var documentToUpdate=doc;if(res){documentToUpdate=_objectSpread(_objectSpread({},res),doc);}return collection.upsert(_objectSpread({},documentToUpdate),function(){return documentToUpdate;},function(){return null;});});}},{key:\"removeRecords\",value:function removeRecords(){var collection=minimongoDB.db[CollectionName];return collection.find({}).fetch(function(rows){var _iterator=_createForOfIteratorHelper(rows),_step;try{var _loop=function _loop(){var record=_step.value;collection.remove(record._id,function(r){collection.resolveRemove(record._id,function(){});});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}});}},{key:\"getPrevRecords\",value:function getPrevRecords(serviceId){var collection=minimongoDB.db[CollectionName];return new Promise(function(resolve,reject){collection.find({serviceId:serviceId}).fetch(function(rows){resolve(rows);});});}}]);return RecordDA;}();/**\n * @returns {RecordDA}\n */export default RecordDA;","map":null,"metadata":{},"sourceType":"module"}