{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/analysis/tabs/LogAnalysis.js\";\nimport { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { makeStyles } from '@mui/styles';\nimport { FixedSizeList } from 'react-window';\nimport AnalysisContext from '../../Analysis-context/AnalysisContext';\nimport Map from '../mapLog/Map';\nimport Row from './data/Row';\nimport DialogRecordDetailLogAnalysis from '../../dialogs/DialogRecordDetailLogAnalysis';\nimport buildTable from '../../tools/dicoin_analysis';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  heightCalc: {\n    '& > div:nth-child(1)': {\n      height: 'calc(100vh - 40rem)',\n      '@media (max-width: 599px)': {\n        height: 'auto'\n      }\n    },\n    '& > div:nth-child(2)': {\n      '& > div': {\n        height: '331px'\n      }\n    }\n  },\n  heightCalcTable: {\n    '& > div': {\n      '&:nth-child(2)': {\n        borderTop: '1px solid silver'\n      },\n      '@media (max-width: 599px)': {\n        height: '100%'\n      }\n    }\n  },\n  ERROR: {\n    color: '#f44336'\n  },\n  WARNING: {\n    color: 'orange'\n  },\n  OK: {\n    color: '#67BB7A'\n  },\n\n  /** ************** */\n  tableExecution: {\n    '& > div:nth-child(1)': {\n      justifyContent: 'space-between',\n      paddingTop: '8px',\n      paddingBottom: '8px',\n      display: 'grid',\n      'grid-template-columns': '4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',\n      fontSize: '10px'\n    },\n    '& > div:nth-child(2)': {\n      overflowX: 'visible !important'\n    },\n    '& li': {\n      justifyContent: 'space-between',\n      paddingTop: '8px',\n      paddingBottom: '8px',\n      paddingLeft: '0px',\n      paddingRight: '0px',\n      display: 'grid',\n      cursor: 'pointer',\n      '&:hover': {\n        background: 'silver'\n      },\n      'grid-template-columns': '4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',\n      fontSize: '10px'\n    }\n  },\n  tableIcon: {\n    position: 'relative',\n    '& span': {\n      position: 'absolute',\n      left: '0px',\n      fontSize: '24px',\n      top: '-1px'\n    },\n    '& p': {\n      marginTop: '16px',\n      marginLeft: '21px',\n      fontSize: '1rem'\n    }\n  },\n  check: {\n    color: '#66bb6a'\n  },\n  error: {\n    color: '#f44336'\n  },\n  warning: {\n    color: '#ff9a00'\n  }\n});\nconst recordStates = {\n  PERSISTED: 'save',\n  SENT: 'check',\n  ERROR: 'error',\n  WARNING: 'warning',\n  NOTE: 'note'\n};\nexport default function LogAnalysis(props) {\n  const {\n    appFileContent,\n    authorityVehicleFileContent,\n    isOwnReady,\n    mapChangedTimestamp,\n    setMapChangedTimestamp,\n    isauthorityCompanyReady,\n    availableHeight,\n    rowHeight\n  } = useContext(AnalysisContext);\n  const {\n    t\n  } = useTranslation('analysisPage');\n  const classes = useStyles(); // #region dialog statistics\n\n  const [openDialogRecordDetailLogAnalysis, setOpenDialogRecordDetailLogAnalysis] = useState(false);\n  const [dataDialogDetails, setDataDialogDetails] = useState();\n  const [indexDetails, setIndexDetails] = useState();\n  const [mappedTable, setMappedTable] = useState([]);\n  const [pathAuthorityFile, setPathAuthorityFile] = useState([]);\n  const [pathAppFile, setPathAppFile] = useState([]);\n\n  function handleOpenDialogRecordDetailsLogAnalysis(data, index) {\n    setOpenDialogRecordDetailLogAnalysis(true);\n    setDataDialogDetails(appFileContent);\n    setIndexDetails(index);\n  }\n\n  function handleCloseDialogRecordDetails() {\n    setOpenDialogRecordDetailLogAnalysis(false);\n  }\n\n  useEffect(() => {\n    if (appFileContent && authorityVehicleFileContent) {\n      const dataLocalStorageStr = localStorage.getItem('analysisParameter');\n\n      if (dataLocalStorageStr) {\n        const analysisParameter = JSON.parse(dataLocalStorageStr);\n        const dataTable = buildTable(appFileContent, authorityVehicleFileContent, analysisParameter);\n        console.log('dataTable ====>', dataTable);\n        setMappedTable(dataTable);\n      }\n    }\n  }, [appFileContent, authorityVehicleFileContent]); // #endregion\n\n  useEffect(() => {\n    if (isOwnReady) {\n      const locACC = [];\n      appFileContent.map(autho => autho.authorityPayload).filter(u => u).forEach((payload, index) => {\n        const location = {\n          lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n          lat: parseFloat(payload.eventos[0].latitud.replace(',', '.'))\n        };\n        locACC.push(location);\n      });\n      setPathAppFile(locACC);\n    }\n  }, [appFileContent, isOwnReady]);\n  useEffect(() => {\n    if (isauthorityCompanyReady) {\n      const locACC = [];\n      authorityVehicleFileContent.forEach((payload, index) => {\n        const location = {\n          lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n          lat: parseFloat(payload.eventos[0].latitud.replace(',', '.'))\n        };\n        locACC.push(location);\n      });\n      setPathAuthorityFile(locACC);\n    }\n  }, [authorityVehicleFileContent, isauthorityCompanyReady]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.heightCalc}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `w-full ${classes.heightCalcTable}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `overflow-auto w-full ${classes.tableExecution}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"#\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Fecha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Estado .P\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Ingresos .PD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Salidas .PD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Ingresos .PT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Salidas .PT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"Loc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            align: \"center\",\n            children: \"DOP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FixedSizeList, {\n          height: availableHeight,\n          width: \"100%\",\n          itemSize: rowHeight,\n          itemCount: (mappedTable || []).length,\n          itemData: {\n            itemsArray: mappedTable || [],\n            handleOpenDialogRecordDetailsLogAnalysis,\n            style: classes\n          },\n          children: Row\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full\",\n      children: /*#__PURE__*/_jsxDEV(Map, {\n        pathAppFile: pathAppFile,\n        authorityAppFileContent: authorityVehicleFileContent,\n        pathAuthorityFile: pathAuthorityFile,\n        mapChangedTimestamp: mapChangedTimestamp,\n        setMapChangedTimestamp: setMapChangedTimestamp,\n        mappedTable: mappedTable\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), openDialogRecordDetailLogAnalysis && /*#__PURE__*/_jsxDEV(DialogRecordDetailLogAnalysis, {\n      open: openDialogRecordDetailLogAnalysis,\n      handleClose: handleCloseDialogRecordDetails,\n      dataDialogDetails,\n      indexDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/src/app/main/analysis/analysis/tabs/LogAnalysis.js"],"names":["useState","useEffect","useContext","useTranslation","makeStyles","FixedSizeList","AnalysisContext","Map","Row","DialogRecordDetailLogAnalysis","buildTable","useStyles","heightCalc","height","heightCalcTable","borderTop","ERROR","color","WARNING","OK","tableExecution","justifyContent","paddingTop","paddingBottom","display","fontSize","overflowX","paddingLeft","paddingRight","cursor","background","tableIcon","position","left","top","marginTop","marginLeft","check","error","warning","recordStates","PERSISTED","SENT","NOTE","LogAnalysis","props","appFileContent","authorityVehicleFileContent","isOwnReady","mapChangedTimestamp","setMapChangedTimestamp","isauthorityCompanyReady","availableHeight","rowHeight","t","classes","openDialogRecordDetailLogAnalysis","setOpenDialogRecordDetailLogAnalysis","dataDialogDetails","setDataDialogDetails","indexDetails","setIndexDetails","mappedTable","setMappedTable","pathAuthorityFile","setPathAuthorityFile","pathAppFile","setPathAppFile","handleOpenDialogRecordDetailsLogAnalysis","data","index","handleCloseDialogRecordDetails","dataLocalStorageStr","localStorage","getItem","analysisParameter","JSON","parse","dataTable","console","log","locACC","map","autho","authorityPayload","filter","u","forEach","payload","location","lng","parseFloat","eventos","longitud","replace","lat","latitud","push","length","itemsArray","style","open","handleClose"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { makeStyles } from '@mui/styles';\nimport { FixedSizeList } from 'react-window';\nimport AnalysisContext from '../../Analysis-context/AnalysisContext';\nimport Map from '../mapLog/Map';\nimport Row from './data/Row';\nimport DialogRecordDetailLogAnalysis from '../../dialogs/DialogRecordDetailLogAnalysis';\nimport buildTable from '../../tools/dicoin_analysis';\n\nconst useStyles = makeStyles({\n  heightCalc: {\n    '& > div:nth-child(1)': {\n      height: 'calc(100vh - 40rem)',\n      '@media (max-width: 599px)': {\n        height: 'auto',\n      },\n    },\n    '& > div:nth-child(2)': {\n      '& > div': {\n        height: '331px',\n      },\n    },\n  },\n  heightCalcTable: {\n    '& > div': {\n      '&:nth-child(2)': {\n        borderTop: '1px solid silver',\n      },\n      '@media (max-width: 599px)': {\n        height: '100%',\n      },\n    },\n  },\n  ERROR: {\n    color: '#f44336',\n  },\n  WARNING: {\n    color: 'orange',\n  },\n  OK: {\n    color: '#67BB7A',\n  },\n\n  /** ************** */\n  tableExecution: {\n    '& > div:nth-child(1)': {\n      justifyContent: 'space-between',\n      paddingTop: '8px',\n      paddingBottom: '8px',\n      display: 'grid',\n      'grid-template-columns': '4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',\n      fontSize: '10px',\n    },\n    '& > div:nth-child(2)': {\n      overflowX: 'visible !important',\n    },\n    '& li': {\n      justifyContent: 'space-between',\n      paddingTop: '8px',\n      paddingBottom: '8px',\n      paddingLeft: '0px',\n      paddingRight: '0px',\n      display: 'grid',\n      cursor: 'pointer',\n      '&:hover': {\n        background: 'silver',\n      },\n      'grid-template-columns': '4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',\n      fontSize: '10px',\n    },\n  },\n  tableIcon: {\n    position: 'relative',\n    '& span': {\n      position: 'absolute',\n      left: '0px',\n      fontSize: '24px',\n      top: '-1px',\n    },\n    '& p': {\n      marginTop: '16px',\n      marginLeft: '21px',\n      fontSize: '1rem',\n    },\n  },\n  check: {\n    color: '#66bb6a',\n  },\n  error: {\n    color: '#f44336',\n  },\n  warning: {\n    color: '#ff9a00',\n  },\n});\n\nconst recordStates = {\n  PERSISTED: 'save',\n  SENT: 'check',\n  ERROR: 'error',\n  WARNING: 'warning',\n  NOTE: 'note',\n};\n\nexport default function LogAnalysis(props) {\n  const {\n    appFileContent,\n    authorityVehicleFileContent,\n    isOwnReady,\n    mapChangedTimestamp,\n    setMapChangedTimestamp,\n    isauthorityCompanyReady,\n    availableHeight,\n    rowHeight,\n  } = useContext(AnalysisContext);\n  const { t } = useTranslation('analysisPage');\n  const classes = useStyles();\n\n  // #region dialog statistics\n  const [openDialogRecordDetailLogAnalysis, setOpenDialogRecordDetailLogAnalysis] = useState(false);\n  const [dataDialogDetails, setDataDialogDetails] = useState();\n  const [indexDetails, setIndexDetails] = useState();\n  const [mappedTable, setMappedTable] = useState([]);\n  const [pathAuthorityFile, setPathAuthorityFile] = useState([]);\n  const [pathAppFile, setPathAppFile] = useState([]);\n  function handleOpenDialogRecordDetailsLogAnalysis(data, index) {\n    setOpenDialogRecordDetailLogAnalysis(true);\n    setDataDialogDetails(appFileContent);\n    setIndexDetails(index);\n  }\n\n  function handleCloseDialogRecordDetails() {\n    setOpenDialogRecordDetailLogAnalysis(false);\n  }\n\n  useEffect(() => {\n    if (appFileContent && authorityVehicleFileContent) {\n      const dataLocalStorageStr = localStorage.getItem('analysisParameter');\n      if (dataLocalStorageStr) {\n        const analysisParameter = JSON.parse(dataLocalStorageStr);\n        const dataTable = buildTable(\n          appFileContent,\n          authorityVehicleFileContent,\n          analysisParameter\n        );\n        console.log('dataTable ====>', dataTable);\n        setMappedTable(dataTable);\n      }\n    }\n  }, [appFileContent, authorityVehicleFileContent]);\n  // #endregion\n\n  useEffect(() => {\n    if (isOwnReady) {\n      const locACC = [];\n      appFileContent\n        .map((autho) => autho.authorityPayload)\n        .filter(u=>u)\n        .forEach((payload, index) => {\n          const location = {\n            lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n            lat: parseFloat(payload.eventos[0].latitud.replace(',', '.')),\n          };\n          locACC.push(location);\n        });\n      setPathAppFile(locACC);\n    }\n  }, [appFileContent, isOwnReady]);\n\n  useEffect(() => {\n    if (isauthorityCompanyReady) {\n      const locACC = [];\n      authorityVehicleFileContent.forEach((payload, index) => {\n        const location = {\n          lng: parseFloat(payload.eventos[0].longitud.replace(',', '.')),\n          lat: parseFloat(payload.eventos[0].latitud.replace(',', '.')),\n        };\n        locACC.push(location);\n      });\n      setPathAuthorityFile(locACC);\n    }\n  }, [authorityVehicleFileContent, isauthorityCompanyReady]);\n\n  return (\n    <div className={`${classes.heightCalc}`}>\n      <div className={`w-full ${classes.heightCalcTable}`}>\n        <div className={`overflow-auto w-full ${classes.tableExecution}`}>\n          <div>\n            <div align=\"center\">#</div>\n            <div />\n            <div>Fecha</div>\n            <div align=\"center\">Estado .P</div>\n            <div align=\"center\">Ingresos .PD</div>\n            <div align=\"center\">Salidas .PD</div>\n            <div align=\"center\">Ingresos .PT</div>\n            <div align=\"center\">Salidas .PT</div>\n            <div align=\"center\">Loc</div>\n            <div align=\"center\">DOP</div>\n          </div>\n          <FixedSizeList\n            height={availableHeight}\n            width=\"100%\"\n            itemSize={rowHeight}\n            itemCount={(mappedTable || []).length}\n            itemData={{\n              itemsArray: mappedTable || [],\n              handleOpenDialogRecordDetailsLogAnalysis,\n              style: classes,\n            }}\n          >\n            {Row}\n          </FixedSizeList>\n        </div>\n      </div>\n\n      <div className=\"w-full\">\n        <Map\n          pathAppFile={pathAppFile}\n          authorityAppFileContent={authorityVehicleFileContent}\n          pathAuthorityFile={pathAuthorityFile}\n          mapChangedTimestamp={mapChangedTimestamp}\n          setMapChangedTimestamp={setMapChangedTimestamp}\n          mappedTable={mappedTable}\n        />\n      </div>\n\n      {openDialogRecordDetailLogAnalysis && (\n        <DialogRecordDetailLogAnalysis\n          {...{\n            open: openDialogRecordDetailLogAnalysis,\n            handleClose: handleCloseDialogRecordDetails,\n            dataDialogDetails,\n            indexDetails,\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}