{"ast":null,"code":"import _slicedToArray from\"/Users/sebastianmolano/NebulaE/Projects/GTPC/dicon-audit-pwa/frontend/dicon-audit-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext}from'react';import{useTranslation}from'react-i18next';import{makeStyles}from'@mui/styles';import{FixedSizeList}from'react-window';import AnalysisContext from'../../Analysis-context/AnalysisContext';import Map from'../mapLog/Map';import Row from'./data/Row';import DialogRecordDetailLogAnalysis from'../../dialogs/DialogRecordDetailLogAnalysis';import buildTable from'../../tools/dicoin_analysis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({heightCalc:{'& > div:nth-child(1)':{height:'calc(100vh - 40rem)','@media (max-width: 599px)':{height:'auto'}},'& > div:nth-child(2)':{'& > div':{height:'331px'}}},heightCalcTable:{'& > div':{'&:nth-child(2)':{borderTop:'1px solid silver'},'@media (max-width: 599px)':{height:'100%'}}},ERROR:{color:'#f44336'},WARNING:{color:'orange'},OK:{color:'#67BB7A'},/** ************** */tableExecution:{'& > div:nth-child(1)':{justifyContent:'space-between',paddingTop:'8px',paddingBottom:'8px',display:'grid','grid-template-columns':'4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',fontSize:'10px'},'& > div:nth-child(2)':{overflowX:'visible !important'},'& li':{justifyContent:'space-between',paddingTop:'8px',paddingBottom:'8px',paddingLeft:'0px',paddingRight:'0px',display:'grid',cursor:'pointer','&:hover':{background:'silver'},'grid-template-columns':'4% 4% 17% 11.2% 9.6% 10.1% 9.1% 8% 19% 8%',fontSize:'10px'}},tableIcon:{position:'relative','& span':{position:'absolute',left:'0px',fontSize:'24px',top:'-1px'},'& p':{marginTop:'16px',marginLeft:'21px',fontSize:'1rem'}},check:{color:'#66bb6a'},error:{color:'#f44336'},warning:{color:'#ff9a00'}});var recordStates={PERSISTED:'save',SENT:'check',ERROR:'error',WARNING:'warning',NOTE:'note'};export default function LogAnalysis(props){var _useContext=useContext(AnalysisContext),appFileContent=_useContext.appFileContent,authorityVehicleFileContent=_useContext.authorityVehicleFileContent,isOwnReady=_useContext.isOwnReady,mapChangedTimestamp=_useContext.mapChangedTimestamp,setMapChangedTimestamp=_useContext.setMapChangedTimestamp,isauthorityCompanyReady=_useContext.isauthorityCompanyReady,availableHeight=_useContext.availableHeight,rowHeight=_useContext.rowHeight;var _useTranslation=useTranslation('analysisPage'),t=_useTranslation.t;var classes=useStyles();// #region dialog statistics\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),openDialogRecordDetailLogAnalysis=_useState2[0],setOpenDialogRecordDetailLogAnalysis=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),dataDialogDetails=_useState4[0],setDataDialogDetails=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),indexDetails=_useState6[0],setIndexDetails=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),mappedTable=_useState8[0],setMappedTable=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pathAuthorityFile=_useState10[0],setPathAuthorityFile=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),pathAppFile=_useState12[0],setPathAppFile=_useState12[1];function handleOpenDialogRecordDetailsLogAnalysis(data,index){setOpenDialogRecordDetailLogAnalysis(true);setDataDialogDetails(appFileContent);setIndexDetails(index);}function handleCloseDialogRecordDetails(){setOpenDialogRecordDetailLogAnalysis(false);}useEffect(function(){if(appFileContent&&authorityVehicleFileContent){var dataLocalStorageStr=localStorage.getItem('analysisParameter');if(dataLocalStorageStr){var analysisParameter=JSON.parse(dataLocalStorageStr);var dataTable=buildTable(appFileContent,authorityVehicleFileContent,analysisParameter);console.log('dataTable ====>',dataTable);setMappedTable(dataTable);}}},[appFileContent,authorityVehicleFileContent]);// #endregion\nuseEffect(function(){if(isOwnReady){var locACC=[];appFileContent.map(function(autho){return autho.authorityPayload;}).filter(function(u){return u;}).forEach(function(payload,index){var location={lng:parseFloat(payload.eventos[0].longitud.replace(',','.')),lat:parseFloat(payload.eventos[0].latitud.replace(',','.'))};locACC.push(location);});setPathAppFile(locACC);}},[appFileContent,isOwnReady]);useEffect(function(){if(isauthorityCompanyReady){var locACC=[];authorityVehicleFileContent.forEach(function(payload,index){var location={lng:parseFloat(payload.eventos[0].longitud.replace(',','.')),lat:parseFloat(payload.eventos[0].latitud.replace(',','.'))};locACC.push(location);});setPathAuthorityFile(locACC);}},[authorityVehicleFileContent,isauthorityCompanyReady]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.heightCalc),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full \".concat(classes.heightCalcTable),children:/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-auto w-full \".concat(classes.tableExecution),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Estado Puertas\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Ingresos PD.\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Salidas PD.\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Ingresos PT.\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Salidas PT.\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"Loc\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:\"DOP\"})]}),/*#__PURE__*/_jsx(FixedSizeList,{height:availableHeight,width:\"100%\",itemSize:rowHeight,itemCount:(mappedTable||[]).length,itemData:{itemsArray:mappedTable||[],handleOpenDialogRecordDetailsLogAnalysis:handleOpenDialogRecordDetailsLogAnalysis,style:classes},children:Row})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(Map,{pathAppFile:pathAppFile,authorityAppFileContent:authorityVehicleFileContent,pathAuthorityFile:pathAuthorityFile,mapChangedTimestamp:mapChangedTimestamp,setMapChangedTimestamp:setMapChangedTimestamp,mappedTable:mappedTable})}),openDialogRecordDetailLogAnalysis&&/*#__PURE__*/_jsx(DialogRecordDetailLogAnalysis,{open:openDialogRecordDetailLogAnalysis,handleClose:handleCloseDialogRecordDetails,dataDialogDetails:dataDialogDetails,indexDetails:indexDetails})]});}","map":null,"metadata":{},"sourceType":"module"}