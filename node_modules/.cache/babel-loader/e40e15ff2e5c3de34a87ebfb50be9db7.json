{"ast":null,"code":"import{createSelector,createEntityAdapter,createSlice}from'@reduxjs/toolkit';import navigationConfig from'app/fuse-configs/navigationConfig';import FuseUtils from'@fuse/utils';import i18next from'i18next';import _ from'@lodash';var navigationAdapter=createEntityAdapter();var emptyInitialState=navigationAdapter.getInitialState();var initialState=navigationAdapter.upsertMany(emptyInitialState,navigationConfig);export var appendNavigationItem=function appendNavigationItem(item,parentId){return function(dispatch,getState){var navigation=selectNavigationAll(getState());return dispatch(setNavigation(FuseUtils.appendNavItem(navigation,item,parentId)));};};export var prependNavigationItem=function prependNavigationItem(item,parentId){return function(dispatch,getState){var navigation=selectNavigationAll(getState());return dispatch(setNavigation(FuseUtils.prependNavItem(navigation,item,parentId)));};};export var updateNavigationItem=function updateNavigationItem(id,item){return function(dispatch,getState){var navigation=selectNavigationAll(getState());return dispatch(setNavigation(FuseUtils.updateNavItem(navigation,id,item)));};};export var removeNavigationItem=function removeNavigationItem(id){return function(dispatch,getState){var navigation=selectNavigationAll(getState());return dispatch(setNavigation(FuseUtils.removeNavItem(navigation,id)));};};var _navigationAdapter$ge=navigationAdapter.getSelectors(function(state){return state.fuse.navigation;}),selectNavigationAll=_navigationAdapter$ge.selectAll,selectNavigationIds=_navigationAdapter$ge.selectIds,selectNavigationItemById=_navigationAdapter$ge.selectById;export{selectNavigationAll,selectNavigationIds,selectNavigationItemById};var navigationSlice=createSlice({name:'navigation',initialState:initialState,reducers:{setNavigation:navigationAdapter.setAll,resetNavigation:function resetNavigation(state,action){return initialState;}}});var _navigationSlice$acti=navigationSlice.actions,setNavigation=_navigationSlice$acti.setNavigation,resetNavigation=_navigationSlice$acti.resetNavigation;export{setNavigation,resetNavigation};var getUserRole=function getUserRole(state){return state.auth.user.role;};export var selectNavigation=createSelector([selectNavigationAll,function(_ref){var i18n=_ref.i18n;return i18n.language;},getUserRole],function(navigation,language,userRole){function setTranslationValues(data){// loop through every object in the array\nreturn data.map(function(item){if(item.translate&&item.title){item.title=i18next.t(\"navigation:\".concat(item.translate));}// see if there is a children node\nif(item.children){// run this function recursively on the children array\nitem.children=setTranslationValues(item.children);}return item;});}return setTranslationValues(_.merge([],FuseUtils.filterRecursive(navigation,function(item){return FuseUtils.hasPermission(item.auth,userRole);})));});export var selectFlatNavigation=createSelector([selectNavigation],function(navigation){return FuseUtils.getFlatNavigation(navigation);});export default navigationSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}